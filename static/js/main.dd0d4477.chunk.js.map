{"version":3,"sources":["components/ChatContainer/ChatFooter/ChatFooter.module.css","assets/images/close-bubble-icon.svg","assets/images/widget-img.png","components/WidgetButton/WidgetButton.js","assets/images/widget-img-small.png","components/WidgetButtonSmall/Bubble/Bubble.js","components/WidgetButtonSmall/WidgetButtonSmall.js","components/chatElements/chatClasses.js","assets/images/rectangle-icon.svg","components/ChatContainer/ChatHeader/ChatHeader.js","components/ChatContainer/ChatBody/Spinner/Spinner.js","components/chatElements/TextMessage/TextMessage.js","assets/images/iconoAvatar.jpeg","components/chatElements/Button/Button.js","components/chatElements/QuickReply/QuickReply.js","components/chatElements/Carousel/Carousel.js","assets/images/download-icon.svg","components/chatElements/Download/Download.js","components/chatElements/Card/Card.js","components/chatElements/Form/Select/Select.js","components/chatElements/Form/Checkbox/Checkbox.js","components/chatElements/Form/TextInput/TextInput.js","components/chatElements/Form/Form.js","components/hoc/Backdrop/Backdrop.js","components/chatElements/Image/Image.js","components/ChatContainer/ChatBody/ChatBody.js","components/ChatContainer/ChatFooter/Textarea/Textarea.js","components/ChatContainer/ChatFooter/InputText/InputText.js","components/ChatContainer/ChatFooter/ChatFooter.js","store/MessagesReducer/actionContainer.js","helpers/functions.js","components/ChatContainer/ChatContainer.js","store/ChatReducer/actionChat.js","services/eva/IPDataConnection.js","services/eva/DirectSocketConnection.js","App.js","reportWebVitals.js","store/MessagesReducer/reducerContainer.js","store/ChatReducer/reducerChat.js","services/eva/processResponse.js","services/eva/EvaConectionV4.js","index.js","components/chatElements/Card/Card.module.css","components/ChatContainer/ChatHeader/ChatHeader.module.css","components/chatElements/Carousel/Carousel.module.css","components/ChatContainer/ChatBody/Spinner/Spinner.module.css","components/chatElements/TextMessage/TextMessage.module.css","components/chatElements/Form/Form.module.css","components/chatElements/Button/Button.module.css","components/chatElements/Form/Checkbox/Checkbox.module.css","components/chatElements/Form/TextInput/TextInput.module.css","components/ChatContainer/ChatFooter/Textarea/Textarea.module.css","components/WidgetButton/WidgetButton.module.css","components/WidgetButtonSmall/Bubble/Bubble.module.css","components/chatElements/QuickReply/QuickReply.module.css","components/WidgetButton/Bubble/Bubble.module.css","components/WidgetButtonSmall/WidgetButtonSmall.module.css","components/ChatContainer/ChatBody/ChatBody.module.css","components/chatElements/Download/Download.module.css","components/chatElements/Form/Select/Select.module.css","components/chatElements/Image/Image.module.css","components/ChatContainer/ChatFooter/InputText/InputText.module.css","components/ChatContainer/ChatContainer.module.css","components/hoc/Backdrop/Backdrop.module.css","config.js"],"names":["module","exports","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","SvgCloseBubbleIcon","_ref","svgRef","title","titleId","props","fill","height","id","viewBox","width","xmlSpace","xmlns","xmlnsXlink","ref","ForwardRef","WidgetButton","t","useTranslation","useState","showBubble","setShowBubble","buttonClicked","option","localStorage","setItem","Date","getTime","click","widget","show","className","classes","WidgetButtonContainer","role","aria-label","onClick","src","widgetImage","alt","tabIndex","CloseButton","Fragment","Bubble","BubbleContainer","dangerouslySetInnerHTML","__html","e","stopPropagation","close","bubble","WidgetSmall","WidgetButtonSmall","msg","removeItem","Msg","type","fromUser","payload","TextMsg","text","agentChat","now","blockInput","Button","value","action","QuickReply","buttons","downloads","position","Carousel","items","fillRule","clipRule","SvgRectangleIcon","focusable","ChatHeader","HeaderAndLogo","widgetIcon","Logo","Title","MoveAndCloseIcon","Spinner","DotContainer","Dot","TextMessage","messageClasses","origin","imageAvatar","WithAvatar","ImgAvatar","join","style","clickHandler","getClick","window","open","buttonClasses","Disabled","Secondary","onKeyPress","charCode","disabled","isDisabled","push","VerticalButtons","options","map","btn","index","selected","buttonStyle","children","currentIndex","setCurrentIndex","setLength","useEffect","carouselContainer","carouselWrapper","prevState","leftArrow","carouselContentWrapper","carouselContent","transform","rightArrow","stroke","strokeWidth","strokeLinecap","strokeLinejoin","SvgDownloadIcon","Download","setClicked","downloadClasses","axios","url","method","responseType","then","response","URL","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","file","body","appendChild","parentNode","removeChild","downloadOk","catch","err","downloadKo","Card","altBtnText","buttonList","dl","dowloadStyle","image","Image","description","Description","buttonContainer","Buttons","downloadsContainer","Downloads","Select","inputModified","setInputModified","targetOption","find","opt","setValue","Modified","placeholder","unshift","onChange","defaultValue","name","htmlFor","label","Checkbox","errMsg","showErrors","isValid","Invalid","Error","errorMessage","console","log","checked","TextInput","Form","setId","inputs","setInputs","setShowErrors","setDisabled","inputsArray","inpt","altText","required","input","sendHandler","errors","form","filter","n","skipHandler","setValues","validations","RegExp","regex","test","validate","inputElement","inputsContainer","Inputs","handler","Info","preventDefault","Backdrop","clicked","fullSize","setFullSize","fullSizeImage","fullWindow","FullSizeImage","ChatBody","chatBodyDiv","useRef","current","scrollTop","scrollHeight","clientHeight","msgElements","processMsgs","messages","sendMsg","pushButton","constData","flow","setIsAgent","aria-live","MessagesContainer","showSpinner","Textarea","RecordButton","useSpeechToText","continuous","useLegacyResults","error","interimResult","stopSpeechToText","isRecording","results","startSpeechToText","rows","JSON","stringify","setInputValue","sendInputValue","setVal","ChatFooterKeyboardButton","setKeyBoardMode","KeyboardButton","InputText","showSuggestions","setShowSuggestions","inputRef","suggestions","trim","toLowerCase","includes","reset","getData","onKeyDown","suggestion","sendSuggestion","handleSuggestionClick","ChatFooter","recordButtonClasses","sendButtonClasses","SendButton","inputFile","ClassLabel","setIsDisabled","isModeKeyboard","setIsModeKeyboard","doReset","commentText","setCommentText","undefined","sendVoice","clickHandlerKeyboard","handleFileRead","event","a","files","formData","FormData","append","directSocketConnection","sendAttachment","ChatFooterModeKeyboard","send","data-recording","size","version","x","y","ChatFooterModeVoice","ChatFooterVisualizerWrapper","wave","ChatFooterRecognitionWrapper","setMessages","currentMsgs","getNow","isHour12","toLocaleString","hour","minute","hour12","withTranslation","dispacth","useDispatch","message","useSelector","state","messagesContainer","setShowSpinner","inputValue","isModeAgent","setIsModeAgent","isDisabledInput","setIsDisabledInput","modeReset","setModeReset","handleTabClose","sendAgentMessage","addEventListener","removeEventListener","showMessageError","newMsg","addMessages","sessionStorage","connection","location","sendInitialMessage","addUserMessage","evaToken","allMsgs","sendUserMessage","sendMessage","abrirConexionAgente","msgs","newMsgsArray","nItems","forEach","item","element","button","cleanAllButtons","agentTasks","client","W3CWebSocket","urlSocket","onopen","getItem","contextData","parse","textContext","processContext","onclose","readyState","onmessage","messageDirect","dataFromServer","activities","allMensajes","attachments","from","contentUrl","connect","isUser","isFirst","dataSend","locale","sendMessageAgent","msgToAdd","newMessages","chatContainer","ChatContainer","closeChat","navigator","geolocation","getCurrentPosition","longitud","coords","longitude","latitud","latitude","getGeolocation","setChatIsOpens","chatIsOpen","chat","IPDataConnection","getIpdata","Promise","resolve","reject","get","ipDataToken","thread","threat","isSecure","is_tor","is_anonymous","is_known_attacker","is_known_abuser","is_threat","is_bogon","responseUpdate","addInfoIPData","dataToSend","ipdata","post","process","DirectSocketConnection","config","headers","Authorization","token","streamUrl","conversationId","App","chatApp","IsBigButtonOpened","setIsBigButtonOpened","ipDAtaConnection","hasIpData","setHasIpData","diff","checkItemStorage","toggleChatHandler","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialMessage","reducerContainer","initialMessageChat","reducerChat","processResponse","rowData","context","sessionCode","dataAnswers","answers","answer","content","technicalText","buttonsArray","newBtn","newButtonsReply","quickReply","newQuickReply","carrusel","EvaMsg","code","Eva4Connection","lang","session","getEvaToken","grant_type","eva4Config","client_id","client_secret","msgEnconded","URLSearchParams","toString","keycloak_ur","org_name","access_token","lng","conversation","userRef","bot","botUUID","instance","orgUUID","envUUID","status","Math","floor","random","rootReducer","combineReducers","store","createStore","getState","i18next","init","interpolation","escapeValue","resources","es","global","global_es","EvaConexion","ReactDOM","render","StrictMode","I18nextProvider","i18n","getElementById"],"mappings":"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","file":"static/js/main.dd0d4477.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ChatFooter\":\"ChatFooter_ChatFooter__3P6VB\",\"InputEnabled\":\"ChatFooter_InputEnabled__3W8aA\",\"ChatFooterButton\":\"ChatFooter_ChatFooterButton__h8KGl\",\"ChatFooterModeKeyboard\":\"ChatFooter_ChatFooterModeKeyboard__Ttv8b\",\"inputFile\":\"ChatFooter_inputFile__1y5NJ\",\"SendButton\":\"ChatFooter_SendButton__3GvTg\",\"ClassLabel\":\"ChatFooter_ClassLabel__1yQlk\",\"ChatFooterModeVoice\":\"ChatFooter_ChatFooterModeVoice__1S70w\",\"ChatFooterVisualizerWrapper\":\"ChatFooter_ChatFooterVisualizerWrapper__2GO2k\",\"ChatFooterRecognitionWrapper\":\"ChatFooter_ChatFooterRecognitionWrapper__2J0XX\",\"ChatFooterKeyboardButton\":\"ChatFooter_ChatFooterKeyboardButton__QIupE\",\"LoadingButton\":\"ChatFooter_LoadingButton__ru8fI\",\"Input\":\"ChatFooter_Input__25-V6\",\"RecordButton\":\"ChatFooter_RecordButton__1prne\",\"wave\":\"ChatFooter_wave__254Os\",\"items\":\"ChatFooter_items__2CZIN\"};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z\"\n});\n\nfunction SvgCloseBubbleIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"#CC3300\",\n    height: \"20px\",\n    id: \"Layer_1\",\n    viewBox: \"0 0 512 512\",\n    width: \"20px\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCloseBubbleIcon);\nexport default __webpack_public_path__ + \"static/media/close-bubble-icon.0c1cc99d.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/widget-img.2c07071b.png\";","import React, { useState } from \"react\";\r\n\r\nimport { ReactComponent as CloseIcon } from \"../../assets/images/close-bubble-icon.svg\";\r\nimport widgetImage from \"../../assets/images/widget-img.png\";\r\nimport classes from \"./WidgetButton.module.css\";\r\nimport Bubble from \"./Bubble/Bubble\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst WidgetButton = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n  const [showBubble, setShowBubble] = useState(true);\r\n\r\n  const hideBubble = () => {\r\n    setShowBubble(false);\r\n  };\r\n\r\n  const buttonClicked = (option) => {\r\n    setShowBubble(true);\r\n    if (option === 'smallButton'){\r\n      localStorage.setItem('oda-widget-status-date', new Date().getTime());\r\n    }\r\n    props.click(option);\r\n  };\r\n\r\n  let bubble = \"\";\r\n\r\n  if (showBubble) {\r\n    // eslint-disable-next-line no-unused-vars\r\n    bubble = <Bubble close={hideBubble} />;\r\n  }\r\n\r\n  let widget = \"\";\r\n\r\n  if (props.show) {\r\n    widget = (\r\n      <div\r\n        className={classes.WidgetButtonContainer}\r\n        role=\"region\"\r\n        aria-label={t(\"widget.title\")}\r\n      >\r\n        \r\n\r\n        <button\r\n          id=\"cbWidgetButton\"\r\n          className={classes.WidgetButton}\r\n          onClick={() => buttonClicked('chat')}\r\n          title={t(\"widget.button.title\")}\r\n          aria-label={t(\"widget.button.title\")}\r\n        >\r\n          <img src={widgetImage} alt=\"Open ChatBot\" />\r\n        </button>\r\n\r\n        <button\r\n          id=\"cbWidgetSmallButton\"\r\n          tabIndex=\"0\"\r\n          className={classes.CloseButton}\r\n          onClick={() => buttonClicked('smallButton')}\r\n          title={t(\"widget.bubble.close\")}\r\n          aria-label={t(\"widget.bubble.close\")}\r\n        >\r\n          <CloseIcon />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <React.Fragment>{widget}</React.Fragment>;\r\n};\r\n\r\nexport default WidgetButton;\r\n","export default __webpack_public_path__ + \"static/media/widget-img-small.5235a67e.png\";","import React from \"react\";\r\n\r\nimport { ReactComponent as CloseIcon } from \"../../../assets/images/close-bubble-icon.svg\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport classes from \"./Bubble.module.css\";\r\n\r\nconst Bubble = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        className={classes.BubbleContainer}\r\n        role=\"region\"\r\n        aria-label={t(\"widget.bubble.title\")}\r\n      >\r\n        <button tabIndex=\"0\" className={classes.Bubble} onClick={props.click}>\r\n          <span\r\n            dangerouslySetInnerHTML={{ __html: t(\"widget.bubble.text1\") }}\r\n          />\r\n          <span\r\n            dangerouslySetInnerHTML={{ __html: t(\"widget.bubble.text2\") }}\r\n          />\r\n        </button>\r\n        <button\r\n          tabIndex=\"0\"\r\n          className={classes.CloseButton}\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            props.close();\r\n          }}\r\n          title={t(\"widget.bubble.close\")}\r\n          aria-label={t(\"widget.bubble.close\")}\r\n        >\r\n          <CloseIcon />\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\nexport default Bubble;\r\n","import React, { useState } from \"react\";\r\nimport widgetImage from \"../../assets/images/widget-img-small.png\";\r\nimport classes from \"./WidgetButtonSmall.module.css\";\r\nimport Bubble from \"./Bubble/Bubble\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst WidgetButton = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n  const [showBubble, setShowBubble] = useState(true);\r\n\r\n  const hideBubble = () => {\r\n    setShowBubble(false);\r\n  };\r\n\r\n  const buttonClicked = (msg) => {\r\n    localStorage.removeItem('oda-widget-status-date');\r\n    setShowBubble(true);\r\n    props.click(msg);\r\n  };\r\n\r\n  let bubble = \"\";\r\n\r\n  if (showBubble) {\r\n    bubble = <Bubble close={hideBubble} />;\r\n  }\r\n\r\n  let widget = \"\";\r\n\r\n  if (props.show) {\r\n    widget = (\r\n      <div\r\n        className={classes.WidgetSmall}\r\n        role=\"region\"\r\n        aria-label={t(\"widget.title\")}\r\n      >\r\n        {bubble}\r\n\r\n        <button\r\n          id=\"cbWidgetSmallButton2\"\r\n          className={classes.WidgetButtonSmall}\r\n          onClick={() => buttonClicked('bigButton')}\r\n          title={t(\"widget.button.title\")}\r\n          aria-label={t(\"widget.button.title\")}\r\n        >\r\n          <img src={widgetImage} alt=\"Open ChatBot\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <React.Fragment>{widget}</React.Fragment>;\r\n};\r\n\r\nexport default WidgetButton;\r\n","class Msg {\r\n  constructor(type, fromUser, payload) {\r\n    this.type = type;\r\n    this.fromUser = fromUser || false;\r\n    this.payload = payload;\r\n  }\r\n}\r\n\r\nexport class TextMsg extends Msg {\r\n  constructor({ fromUser, text, agentChat, now, blockInput = false }) {\r\n    super();\r\n    this.type = \"text\";\r\n    this.fromUser = fromUser;\r\n    this.payload = {\r\n      text: text,\r\n    };\r\n    this.agentChat = agentChat;\r\n    this.now = now;\r\n    this.blockInput = blockInput;\r\n  }\r\n}\r\n\r\nexport class Button {\r\n  constructor({ title, value, action, type }) {\r\n    this.title = title;\r\n    this.value = value;\r\n    this.action = action;\r\n    this.type = type;\r\n  }\r\n}\r\n\r\nexport class QuickReply extends Msg {\r\n  constructor({ buttons, downloads, position }) {\r\n    super();\r\n    this.position = position;\r\n    this.type = \"quick_reply\";\r\n    this.payload = {\r\n      buttons: buttons,\r\n      downloads: downloads,\r\n    };\r\n  }\r\n}\r\n\r\nexport class Carousel extends Msg {\r\n  constructor({ items }) {\r\n    super();\r\n    this.type = \"CARRUSEL\";\r\n    this.payload = {\r\n      items: items,\r\n    };\r\n  }\r\n}\r\n\r\nexport class Card extends Msg {\r\n  constructor({ title, image, buttons }) {\r\n    super();\r\n    this.type = \"card\";\r\n    this.payload = {\r\n      title: title,\r\n      image: image,\r\n      buttons: buttons,\r\n    };\r\n  }\r\n}\r\n\r\nexport class Image extends Msg {\r\n  constructor({ image, position }) {\r\n    super();\r\n    this.position = position;\r\n    this.type = \"card\";\r\n    this.payload = {\r\n      image: image,\r\n    };\r\n  }\r\n}\r\nexport class Download {\r\n  constructor({ title, url, file, downloadOk, downloadKo, type }) {\r\n    this.title = title;\r\n    this.url = url;\r\n    this.file = file;\r\n    this.downloadOk = downloadOk;\r\n    this.downloadKo = downloadKo;\r\n    this.type = type;\r\n  }\r\n}\r\nexport class Form extends Msg {\r\n  constructor({ id, inputs, buttons, position }) {\r\n    super();\r\n    this.position = position;\r\n    this.type = \"form\";\r\n    this.payload = {\r\n      id: id,\r\n      inputs: inputs,\r\n      buttons: buttons,\r\n    };\r\n  }\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M10 6H22C24.2091 6 26 7.79086 26 10V22C26 24.2091 24.2091 26 22 26H10C7.79086 26 6 24.2091 6 22V10C6 7.79086 7.79086 6 10 6ZM4 10C4 6.68629 6.68629 4 10 4H22C25.3137 4 28 6.68629 28 10V22C28 25.3137 25.3137 28 22 28H10C6.68629 28 4 25.3137 4 22V10ZM10 21C9.44772 21 9 21.4477 9 22C9 22.5523 9.44772 23 10 23H22C22.5523 23 23 22.5523 23 22C23 21.4477 22.5523 21 22 21H10Z\",\n  fill: \"white\"\n});\n\nfunction SvgRectangleIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 32 32\",\n    fill: \"none\",\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRectangleIcon);\nexport default __webpack_public_path__ + \"static/media/rectangle-icon.a9a68ad2.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport classes from \"./ChatHeader.module.css\";\r\nimport widgetIcon from \"../../../assets/images/widget-img.png\";\r\nimport { ReactComponent as CloseIcon } from \"../../../assets/images/rectangle-icon.svg\";\r\n//import { ReactComponent as MoveIcon } from \"../../../assets/images/move-icon.svg\";\r\n\r\nconst ChatHeader = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n\r\n  const buttonClicked = (option) => {\r\n    props.close(option);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classes.ChatHeader}\r\n      role=\"region\"\r\n      aria-label={t(\"chatheader.title\")}\r\n    >\r\n      <div className={classes.HeaderAndLogo}>    \r\n        <img src={widgetIcon} alt=\"Open ChatBot\" className={classes.Logo} />        \r\n        <div className={classes.Title}>LineaMadrid</div>\r\n      </div>\r\n      <div className={classes.MoveAndCloseIcon}>        \r\n        <button\r\n          className={classes.CloseButton}\r\n          onClick={() => buttonClicked('chat')}\r\n          title={t(\"chatheader.close\")}\r\n          aria-label={t(\"chatheader.close\")}\r\n        >\r\n          <CloseIcon />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ChatHeader;\r\n","import React from \"react\";\r\n\r\nimport classes from \"./Spinner.module.css\";\r\n\r\nconst Spinner = (props) => {\r\n  return (\r\n    <div className={classes.Spinner}>\r\n      <div className={classes.DotContainer}>\r\n        <div className={classes.Dot}></div>\r\n        <div className={classes.Dot}></div>\r\n        <div className={classes.Dot}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Spinner;\r\n","import React from \"react\";\r\nimport iconAvatar from \"../../../assets/images/iconoAvatar.jpeg\";\r\nimport classes from \"./TextMessage.module.css\";\r\n\r\nconst TextMessage = (props) => {\r\n  const messageClasses = [\r\n    classes[`${props.origin}-message`],\r\n    classes.TextMessage,\r\n    classes.imageAvatar,\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      {!props.fromUser && props.agentChat ? (\r\n        <div>\r\n          <div className={classes.WithAvatar}>\r\n            <img className={classes.ImgAvatar} src={iconAvatar} alt=\"Person\" />\r\n            <div>\r\n              <div className={messageClasses.join(\" \")} style={props.style}>\r\n                <span\r\n                  dangerouslySetInnerHTML={{ __html: props.payload.text }}\r\n                />\r\n              </div>\r\n              <small>\r\n                {props.now}\r\n                {props.fromUser}\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className={messageClasses.join(\" \")} style={props.style}>\r\n          <span dangerouslySetInnerHTML={{ __html: props.payload.text }} />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default TextMessage;\r\n","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCABkAGQDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iimSSJDGXdgFHU0APJwMms+51aGIlYx5je3T86zr3UJLolVysXp6/WqVAFyXU7qUnD7B6KMVVaR3+87N9Tmm0UxACR0OKmju7iL7kzj2zkVDRQBqQazIpAmQMPVeDWpBcxXK7o3B9R3FcvTkkeJw6MVYdCKAOsoqhYaitziOTCy/o1X6QwooooACcDJrndQvTdS7VP7pTx7+9aWrXPlW4jU/NJx+HesGgAooopiCijqcDrVyLTpnGWIQeh60AU6K0G0tsfLKCfcVUmt5IDiRcDsR0NAEVFFFACglWDAkEcgiuh0+8+1Q/N/rF4b39652p7O4NtcrJ/D0b6UAdPRQDkZHSikM53U5fNvnGeE+UVTp0jb5Xb1JNNpiCiiigDU0+2CoJmHzN932FXqRQFRQOgGKWkMKa6LIhRxlT1FOooAwriEwTMh5A6H1FRVoaoo3xN3IIrPpiCiiigDo9Nl82xQk8r8p/Cise1umgiKg4yc0UhlQjBIoqa7j8q7lT0Y4qGmIKKKKAN22lE1ujjrjB+tS1iWt01s54yh6itaK5hmGUcZ9DwaQyWikLKoyWAHuapXOoKoKwnc397sKAK+oyh7gKOiDH41ToJycmimIKKKKAHKhYZFFa+mWqyWm9+7HFFAEWswbZVmA4YYP1rLrqLmBbmBo279D6GuZkRopGRxhlOCKAG0UVPbWr3DcfKg6tQBBUy2s78rE2PUjFa0NtFAPkXn+8etTUhmKbG5/wCeRP4ioXjeP76Mv1FdBQQCMEAj0NAHO0VqXGno4LQ/K393sazGVkYqwII6g0xCUqqWYKoyScAUlaekWheT7Q4+Vfu+5oA17eIQwJGP4RiipKKQwqhqNh9pXzIx+9A/76FX6KAOXgt2mn8sgrj73tW2iKiBVGFHQVZaFGYsAAx6kDrULIy9R+NADaKKKACiiigAqpfWwmj3qP3ij8x6Vb61KkJPLce1AGFZWT3cncRj7zf0FdEiLGgRBhQMAUqoqKFVQAOwpaACiiigAooooAKKKKAGGJD2x9KhdQvSiigBo5NSpEpGTmiigCVVC9BiloooAKKKKACiiigD/9k=\"","import React, { useState } from \"react\";\r\nimport classes from \"./Button.module.css\";\r\n\r\nconst Button = (props) => {\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [clicked, setClicked] = useState(false);\r\n  const clickHandler = () => {\r\n    // if (!props.disabled) {\r\n    //   setClicked(true);\r\n    // }\r\n    if (props.type === 'URL' && props.action === 'GET_LOCATION')\r\n    {\r\n      props.getClick(props.action, props.title);\r\n    } \r\n    else if (props.type === 'URL') {\r\n      window.open(\r\n        props.value,\r\n        props.type === \"URL\" ? \"_blank\" : \"_self\"\r\n      );\r\n    }\r\n    else if (props.value) {\r\n      props.getClick(props.value, props.title);\r\n    }\r\n  };\r\n  const handleKeypress = (e) => {\r\n    //it triggers by pressing the enter key\r\n    if (e.charCode === 13) {\r\n      clickHandler();\r\n    }\r\n  };\r\n  \r\n  let buttonClasses = [];\r\n  if (props.type === 'disabled') {\r\n    buttonClasses = [classes.Button, classes.Disabled];\r\n  }\r\n  else {\r\n    buttonClasses = [classes.Button, ( props.type === 'quick_reply' ? classes.Secondary : '')];\r\n  }\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      //ref={(node) => { button = node; }}\r\n      style={props.style}\r\n      onKeyPress={handleKeypress}\r\n      className={buttonClasses.join(\" \")}\r\n      disabled={props.isDisabled}\r\n      onClick={clickHandler}\r\n    >\r\n      <span>{props.title}</span>\r\n    </button>\r\n  );\r\n};\r\nexport default Button;\r\n","// eslint-disable-next-line no-unused-vars\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nimport classes from \"./QuickReply.module.css\";\r\nimport Button from \"../Button/Button\";\r\n\r\nconst QuickReply = (props) => {\r\n  /*const [disabled, setDisabled]=useState(false);\r\n\r\n  useEffect(() => {\r\n    // focusing the first button of new quickreply\r\n    firstButton.button.focus();\r\n    const clickHandler = (value, altText) => {\r\n      if(!disabled){\r\n        if (value) props.selected(value, altText);\r\n      }\r\n    }\r\n  \r\n  }, []);\r\n*/\r\n  const messageClasses = [\r\n    classes[`${props.origin}-message`],\r\n    classes.QuickReply,\r\n  ];\r\n  if (props.payload.buttons.length > 2) {\r\n    messageClasses.push(classes.VerticalButtons);\r\n  }\r\n\r\n  const options = props.payload.buttons.map((btn, index) => (\r\n    <li key={index}>\r\n      <Button\r\n        //ref={index === 0 ? (button) => { firstButton = button; } : null}\r\n        key={index}\r\n        title={btn.title}\r\n        value={btn.value}\r\n        action={btn.action}\r\n        type={btn.type}\r\n        click={props.selected}\r\n        style={props.buttonStyle}\r\n        getClick={props.getClick}\r\n      />\r\n    </li>\r\n  ));\r\n  return (\r\n    <div className={messageClasses.join(\" \")} style={props.style}>\r\n      {options}\r\n    </div>\r\n  );\r\n};\r\nexport default QuickReply;\r\n","import React, { useEffect, useState } from 'react'\r\nimport classes from \"./Carousel.module.css\";\r\n\r\nconst Carousel = (props) => {\r\n    const {children} = props;\r\n\r\n    //console.log('VALORES', children);\r\n    const [currentIndex, setCurrentIndex] = useState(0)\r\n    const [length, setLength] = useState(children.length)\r\n\r\n    // Set the length to match current children from props\r\n    useEffect(() => {\r\n        setLength(children.length)\r\n    }, [children])\r\n\r\n    const next = () => {\r\n        if (currentIndex < (length - 1)) {\r\n            setCurrentIndex(prevState => prevState + 1)\r\n        }\r\n    }\r\n\r\n    const prev = () => {\r\n        if (currentIndex > 0) {\r\n            setCurrentIndex(prevState => prevState - 1)\r\n        }\r\n    }\r\n\r\n    return (\r\n      <div className={classes.carouselContainer}>\r\n        <div className={classes.carouselWrapper}>\r\n          {/* You can alwas change the content of the button to other things */}\r\n          {currentIndex > 0 && (\r\n            <button onClick={prev} className={classes.leftArrow}>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"24\"\r\n                height=\"24\"\r\n                viewBox=\"0 0 24 24\"\r\n                role=\"img\"\r\n                aria-label=\"Previous card\"\r\n              >\r\n                <path d=\"M16 17.65L14.261 19 8 12l6.261-7L16 6.35 10.946 12z\"></path>\r\n              </svg>\r\n            </button>\r\n          )}\r\n          <div className={classes.carouselContentWrapper}>\r\n            <div\r\n              className={classes.carouselContent}\r\n              style={{ transform: `translateX(-${currentIndex * 100}%)` }}\r\n            >\r\n              {children}\r\n            </div>\r\n          </div>\r\n          {/* You can alwas change the content of the button to other things */}\r\n          {currentIndex < length - 1 && (\r\n            <button onClick={next} className={classes.rightArrow}>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"24\"\r\n                height=\"24\"\r\n                viewBox=\"0 0 24 24\"\r\n                role=\"img\"\r\n                aria-label=\"Next card\"\r\n              >\r\n                <path d=\"M8 17.65L9.739 19 16 12 9.739 5 8 6.35 13.054 12z\"></path>\r\n              </svg>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Carousel\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 15L16 11M12 15V3V15ZM12 15L8 11L12 15Z\",\n  stroke: \"#C33400\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2 17L2.621 19.485C2.72915 19.9177 2.97882 20.3018 3.33033 20.5763C3.68184 20.8508 4.11501 20.9999 4.561 21H19.439C19.885 20.9999 20.3182 20.8508 20.6697 20.5763C21.0212 20.3018 21.2708 19.9177 21.379 19.485L22 17\",\n  stroke: \"#C33400\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n});\n\nfunction SvgDownloadIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDownloadIcon);\nexport default __webpack_public_path__ + \"static/media/download-icon.612940a1.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from \"react\";\r\n\r\nimport classes from \"./Download.module.css\";\r\nimport { ReactComponent as DownloadIcon } from \"../../../assets/images/download-icon.svg\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst Download = (props) => {\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [clicked, setClicked] = useState(false);\r\n\r\n  const clickHandler = () => {\r\n    setClicked(true);\r\n\r\n    axios({\r\n      url: props.url,\r\n      method: \"GET\",\r\n      responseType: \"blob\", // important\r\n    })\r\n      .then((response) => {\r\n        const url = window.URL.createObjectURL(new Blob([response.data]));\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.setAttribute(\"download\", props.file);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        // Clean up and remove the link\r\n        link.parentNode.removeChild(link);\r\n        props.click(props.downloadOk, props.title);\r\n      })\r\n      .catch((err) => {\r\n        props.click(props.downloadKo, props.title);\r\n      });\r\n  };\r\n\r\n  const downloadClasses = [\r\n    classes.Download,\r\n    classes[`Download--${props.type}`],\r\n  ];\r\n\r\n  // if (this.state.clicked){\r\n  //   downloadClasses.push(classes.Download--clicked)\r\n  // }\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      style={props.style}\r\n      className={downloadClasses.join(\" \")}\r\n      disabled={props.isDisabled}\r\n      onClick={clickHandler}\r\n    >\r\n      <DownloadIcon />\r\n      <span>{props.title}</span>\r\n    </button>\r\n  );\r\n};\r\nexport default Download;\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport classes from \"./Card.module.css\";\r\nimport Button from \"../Button/Button\";\r\nimport Download from \"../Download/Download\";\r\n\r\nconst Card = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n  const messageClasses = [classes[`${props.origin}-message`], classes.Card];\r\n\r\n  const clickHandler = (value, altBtnText) => {\r\n    if (value) props.selected(value, altBtnText);\r\n  };\r\n\r\n  let buttons = \"\";\r\n\r\nif (props.payload){\r\n  buttons = props.payload.buttonList\r\n  .map((btn, index) => (\r\n    <li key={index}>\r\n      <Button\r\n        key={index}\r\n        title={btn.title}\r\n        value={btn.value}\r\n        action={btn.action}\r\n        type={btn.type}\r\n        style={props.buttonStyle}\r\n        click={clickHandler}\r\n      />\r\n    </li>\r\n  ));\r\n  }\r\n\r\n  //falta download\r\n  let downloads = \"\";\r\n\r\n  downloads = props.payload && props.payload.downloads\r\n    ? props.payload.downloads.map((dl, index) => (\r\n        <li key={index}>\r\n          <Download\r\n            title={dl.title}\r\n            url={dl.url}\r\n            type={dl.type}\r\n            file={dl.file}\r\n            downloadKo={dl.downloadKo}\r\n            downloadOk={dl.downloadOk}\r\n            style={props.dowloadStyle}\r\n            click={clickHandler}\r\n          />\r\n        </li>\r\n      ))\r\n    : \"\";\r\n  const image = props.payload && props.payload.image ? (\r\n    <div className={classes.Image}>\r\n      <img\r\n        src={props.payload.image}\r\n        alt={props.payload.title}\r\n        aria-label={t(\"card.image\")}\r\n      />\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n\r\n  const title = props.payload && props.payload.title ? (\r\n    <div className={classes.Title} aria-label={t(\"card.title\")}>\r\n      {props.payload.title}\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n\r\n  const description = props.payload && props.payload.text ? (\r\n    <div className={classes.Description} aria-label={t(\"card.description\")}>\r\n      <div dangerouslySetInnerHTML={{ __html: props.payload.text }} />\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n\r\n  const buttonContainer = props && props.payload.buttonList.length ? (\r\n    <ul className={classes.Buttons} aria-label={t(\"card.buttons\")}>\r\n      {buttons}\r\n    </ul>\r\n  ) : (\r\n    \"\"\r\n  );\r\n\r\n  const downloadsContainer = props.payload && props.payload.downloads ? (\r\n    <ul\r\n      className={[classes.Buttons, classes.Downloads].join(\" \")}\r\n      aria-label={t(\"card.downloads\")}\r\n    >\r\n      {downloads}\r\n    </ul>\r\n  ) : (\r\n    \"\"\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={messageClasses.join(\" \")}\r\n      style={props.style}\r\n      role=\"region\"\r\n      tabIndex=\"0\"\r\n      aria-label={t(\"card.header\")}\r\n    >\r\n      {image}\r\n        {title}\r\n        {description}\r\n        {buttonContainer}\r\n        {downloadsContainer}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport classes from \"./Select.module.css\";\r\n\r\nconst Select = (props) => {\r\n  const [inputModified, setInputModified] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!inputModified && props.value) {\r\n      setInputModified(true);\r\n      const targetOption = props.options.find((opt) => props.value === opt.id);\r\n      props.setValue(props.id, props.value, targetOption.value);\r\n    }\r\n  }, [inputModified, props]);\r\n\r\n  const messageClasses = [\r\n    classes.Select,\r\n    inputModified ? classes.Modified : \"\",\r\n  ];\r\n\r\n  const placeholder = (\r\n    <option key={\"placeholder\"} disabled value={\"placeholder\"}>\r\n      {props.placeholder}\r\n    </option>\r\n  );\r\n\r\n  const options = props.options.map((opt) => {\r\n    return (\r\n      <option key={opt.id} value={opt.id}>\r\n        {opt.value}\r\n      </option>\r\n    );\r\n  });\r\n\r\n  options.unshift(placeholder);\r\n\r\n  const changeHandler = (e) => {\r\n    if (!inputModified) setInputModified(true);\r\n    const targetOption = props.options.find((opt) => e.target.value === opt.id);\r\n    props.setValue(props.id, e.target.value, targetOption.value);\r\n  };\r\n\r\n  return (\r\n    <div className={messageClasses.join(\" \")}>\r\n      <select\r\n        id={props.id}\r\n        onChange={changeHandler}\r\n        disabled={props.isDisabled}\r\n        style={props.style}\r\n        defaultValue={props.value || \"placeholder\"}\r\n        name={props.id}\r\n      >\r\n        {options}\r\n      </select>\r\n      <label htmlFor={props.id}> {props.label} </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport classes from \"./Checkbox.module.css\";\r\n\r\nconst Checkbox = (props) => {\r\n  const [inputModified, setInputModified] = useState(false);\r\n\r\n  const messageClasses = [\r\n    classes.Checkbox,\r\n    inputModified ? classes.Modified : \"\",\r\n  ];\r\n\r\n  // const isChecked = props.value === 'true' ;\r\n  useEffect(() => {\r\n    // comoponentDidMout hook to set select value in a default valued is passed in props\r\n    if (!inputModified && props.value) {\r\n      setInputModified(true);\r\n      props.setValue(props.id, props.value, null);\r\n    }\r\n  }, [inputModified, props]);\r\n\r\n  const changeHandler = (e) => {\r\n    if (!inputModified) setInputModified(true);\r\n    console.log(e.target.checked);\r\n    props.setValue(props.id, e.target.checked, null);\r\n  };\r\n\r\n  let errMsg = \"\";\r\n  if (props.showErrors && !props.isValid) {\r\n    messageClasses.push(classes.Invalid);\r\n    errMsg = (\r\n      <div className={classes.Error}>\r\n        <span>\r\n          {\"\\u26A0\"} {props.errorMessage}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={messageClasses.join(\" \")}>\r\n      <input\r\n        id={props.id}\r\n        type=\"checkbox\"\r\n        onChange={changeHandler}\r\n        style={props.style}\r\n        disabled={props.isDisabled}\r\n        checked={props.value}\r\n        name={props.id}\r\n      />\r\n      <label htmlFor={props.id}> {props.label} </label>\r\n      {errMsg}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkbox;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport classes from \"./TextInput.module.css\";\r\n\r\nconst TextInput = (props) => {\r\n  const [inputModified, setInputModified] = useState(false);\r\n\r\n  const messageClasses = [\r\n    classes.TextInput,\r\n    inputModified ? classes.Modified : \"\",\r\n  ];\r\n\r\n  useEffect(() => {\r\n    // comoponentDidMout hook to set select value in a default valued is passed in props\r\n    if (!inputModified && props.value) {\r\n      setInputModified(true);\r\n      props.setValue(props.id, props.value, props.value);\r\n    }\r\n  }, [inputModified, props]);\r\n\r\n  const changeHandler = (e) => {\r\n    if (!inputModified) setInputModified(true);\r\n    props.setValue(props.id, e.target.value, e.target.value);\r\n  };\r\n\r\n  let errMsg = \"\";\r\n  if (props.showErrors && !props.isValid) {\r\n    messageClasses.push(classes.Invalid);\r\n    errMsg = (\r\n      <div className={classes.Error}>\r\n        <span>\r\n          {\"\\u26A0\"} {props.errorMessage}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={messageClasses.join(\" \")}>\r\n      <input\r\n        id={props.id}\r\n        onChange={changeHandler}\r\n        style={props.style}\r\n        placeholder={props.placeholder}\r\n        disabled={props.isDisabled}\r\n        value={props.value}\r\n        name={props.id}\r\n      />\r\n      <label htmlFor={props.id}> {props.label} </label>\r\n      {errMsg}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextInput;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport classes from \"../Form/Form.module.css\";\r\nimport Button from \"../Button/Button\";\r\nimport Select from \"../Form/Select/Select\";\r\nimport Checkbox from \"../Form/Checkbox/Checkbox\";\r\nimport TextInput from \"./TextInput/TextInput\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst Form = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n  const [id, setId] = useState(\"\");\r\n  const [inputs, setInputs] = useState([]);\r\n  const [showErrors, setShowErrors] = useState(false);\r\n  const [disabled, setDisabled] = useState(props.isDisabled);\r\n\r\n  useEffect(() => {\r\n    // inputs\r\n    const inputsArray = props.payload.inputs.map((inpt) => {\r\n      return {\r\n        ...{\r\n          value: inpt.value || \"\",\r\n          altText: \"\",\r\n          isValid: !inpt.required, //if is required, isValid = false by default\r\n          errorMessage: t(\"form.defaultError\"),\r\n        },\r\n        ...inpt,\r\n      };\r\n    });\r\n\r\n    setId(props.payload.id);\r\n    setInputs(inputsArray);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const sendHandler = (value, altBtnText) => {\r\n    const errors = !!inputs.find((inpt) => !inpt.isValid);\r\n\r\n    if (errors) {\r\n      setShowErrors(errors);\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      form: {\r\n        id: id,\r\n        inputs: inputs.map((inpt) => ({ id: inpt.id, value: inpt.value })),\r\n      },\r\n    };\r\n    let altText = inputs.map((inpt) => inpt.altText);\r\n    altText = altText.filter((n) => n).join(\", \");\r\n    props.selected(value, altText || altBtnText, payload);\r\n    setDisabled(true);\r\n  };\r\n\r\n  const skipHandler = (value, altBtnText) => {\r\n    props.selected(value, altBtnText);\r\n    setDisabled(true);\r\n  };\r\n\r\n  const validate = (input) => {\r\n    let isValid = true;\r\n    let errorMessage = input.errorMessage;\r\n\r\n    if (input.required && !input.value) {\r\n      isValid = false;\r\n    }\r\n    if (input.validations) {\r\n      for (let i = 0; i < input.validations.length; i++) {\r\n        var re = new RegExp(input.validations[i].regex);\r\n        if (!re.test(input.value)) {\r\n          isValid = false;\r\n          errorMessage = input.validations[i].errorMessage;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return [isValid, errorMessage];\r\n  };\r\n\r\n  const setValues = (id, value, altText) => {\r\n    const inputsArray = [...inputs];\r\n    const target = inputsArray.find((inpt) => inpt.id === id);\r\n    target.value = value;\r\n    target.altText = altText;\r\n    [target.isValid, target.errorMessage] = validate(target);\r\n\r\n    setInputs(inputsArray);\r\n  };\r\n\r\n  const checkDisabled = () =>\r\n    !inputs.find((inpt) => inpt.required && !inpt.value);\r\n\r\n  const messageClasses = [classes[`${props.origin}-message`], classes.Form];\r\n\r\n  let input = \"\";\r\n\r\n  input = inputs.map((inpt, index) => {\r\n    let inputElement = \"\";\r\n    switch (inpt.type) {\r\n      case \"select\":\r\n        inputElement = (\r\n          <Select setValue={setValues} isDisabled={disabled} {...inpt} />\r\n        );\r\n        break;\r\n      case \"text\":\r\n        inputElement = (\r\n          <TextInput\r\n            setValue={setValues}\r\n            isDisabled={disabled}\r\n            showErrors={showErrors}\r\n            {...inpt}\r\n          />\r\n        );\r\n        break;\r\n      case \"checkbox\":\r\n        inputElement = (\r\n          <Checkbox\r\n            setValue={setValues}\r\n            isDisabled={disabled}\r\n            showErrors={showErrors}\r\n            {...inpt}\r\n          />\r\n        );\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return <li key={index}>{inputElement}</li>;\r\n  });\r\n\r\n  const inputsContainer = (\r\n    <ul className={classes.Inputs} aria-label={t(\"form.inputs\")}>\r\n      {input}\r\n    </ul>\r\n  );\r\n\r\n  let buttons = \"\";\r\n\r\n  buttons = props.payload.buttons.map((btn, index) => {\r\n    const handler = btn.type === \"cancel\" ? skipHandler : sendHandler;\r\n    const isDisabled = btn.type === \"cancel\" ? false : checkDisabled();\r\n\r\n    return (\r\n      <li key={index}>\r\n        <Button\r\n          title={btn.title}\r\n          value={btn.value}\r\n          action={btn.action}\r\n          type={btn.type}\r\n          style={props.buttonStyle}\r\n          isDisabled={isDisabled || disabled}\r\n          click={handler}\r\n        />\r\n      </li>\r\n    );\r\n  });\r\n\r\n  const buttonContainer = props.payload.buttons.length ? (\r\n    <ul className={classes.Buttons} aria-label={t(\"form.buttons\")}>\r\n      {buttons}\r\n    </ul>\r\n  ) : (\r\n    \"\"\r\n  );\r\n\r\n  const handleKeypress = (e) => {\r\n    //it triggers by pressing the enter key\r\n    if (e.charCode === 13) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={messageClasses.join(\" \")}\r\n      style={props.style}\r\n      role=\"region\"\r\n      tabIndex=\"0\"\r\n      aria-label={t(\"form.header\")}\r\n    >\r\n      <form id={props.id} className={classes.Info} onKeyPress={handleKeypress}>\r\n        {inputsContainer}\r\n        {buttonContainer}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\n\r\nimport classes from \"./Backdrop.module.css\";\r\n\r\nconst Backdrop = (props) => {\r\n  return (\r\n    <div className={classes.Backdrop} onClick={props.clicked}>\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\nexport default Backdrop;\r\n","import React, { useState } from \"react\";\r\nimport classes from \"./Image.module.css\";\r\nimport Backdrop from \"../../hoc/Backdrop/Backdrop\";\r\n\r\nconst Image = (props) => {\r\n  const [fullSize, setFullSize] = useState(false);\r\n\r\n  function hideFullSize() {\r\n    setFullSize(false);\r\n  }\r\n\r\n  function showFullSize() {\r\n    setFullSize(true);\r\n  }\r\n\r\n  const fullSizeImage = fullSize ? (\r\n    <Backdrop fullWindow={true} show={fullSize} clicked={hideFullSize}>\r\n      <img className={classes.FullSizeImage} src={props.payload.image} alt=\"\" />\r\n    </Backdrop>\r\n  ) : null;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className={classes.Image} style={props.style}>\r\n        <img src={props.payload.image} onClick={showFullSize} alt=\"\" />\r\n      </div>\r\n      {fullSizeImage}\r\n    </React.Fragment>\r\n  );\r\n};\r\nexport default Image;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport classes from \"./ChatBody.module.css\";\r\nimport Spinner from \"./Spinner/Spinner\";\r\nimport TextMessage from \"../../chatElements/TextMessage/TextMessage\";\r\nimport QuickReply from \"../../chatElements/QuickReply/QuickReply\";\r\nimport Carousel from \"../../chatElements/Carousel/Carousel\";\r\nimport Card from \"../../chatElements/Card/Card\";\r\nimport Form from \"../../chatElements/Form/Form\";\r\nimport Image from \"../../chatElements/Image/Image\";\r\nimport Button from \"../../chatElements/Button/Button\";\r\n\r\nconst ChatBody = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n\r\n  const chatBodyDiv = useRef(null);\r\n\r\n  useEffect(() => {\r\n    chatBodyDiv.current.scrollTop =\r\n      chatBodyDiv.current.scrollHeight - chatBodyDiv.current.clientHeight;\r\n  });\r\n\r\n  const processMsgs = (messages) =>\r\n    messages.map((msg, index) => {\r\n      const origin = msg.fromUser ? \"User\" : \"Bot\";       \r\n\r\n      //console.log(\"+++++++++++ msg\",msg) ;         \r\n      switch (msg.type) {\r\n        case \"text\":\r\n          //console.log(\"--TEXT--\",msg.type);\r\n          //console.log(\"--TEXT2--\",origin)\r\n          return (\r\n            <TextMessage\r\n              // ref={scrollTargetMessage}\r\n              key={index}\r\n              position={msg.position}\r\n              origin={origin}\r\n              fromUser={msg.fromUser}\r\n              payload={msg.payload}\r\n              agentChat={msg.agentChat}\r\n              now={msg.now}\r\n            /> \r\n          );\r\n        case \"quick_reply\":\r\n          //console.log(\"--QUICKREPLY--\",msg.type)\r\n          return (\r\n            <QuickReply\r\n              key={index}\r\n              position={msg.position}\r\n              origin={origin}\r\n              payload={msg.payload}\r\n              selected={props.sendMsg}\r\n              getClick ={props.pushButton}\r\n            />\r\n          );\r\n        case \"CARRUSEL\":\r\n          console.log(\"--CARRUSEL--\",msg.type)\r\n          return (\r\n            <Carousel key={index} origin={origin} type={msg.type}>\r\n               {processMsgs(msg.payload.items)}\r\n          </Carousel>\r\n          );\r\n        case \"form\":\r\n          console.log(\"--FORM--\",msg.type)\r\n          const isDisabled = index !== messages.length - 1;\r\n          return (\r\n            <Form\r\n              key={index}\r\n              position={msg.position}\r\n              origin={origin}\r\n              payload={msg.payload}\r\n              selected={props.sendMsg}\r\n              isDisabled={isDisabled}\r\n            />\r\n          );\r\n        case \"card\":\r\n          console.log(\"--CARD--\",msg.type)\r\n          let constData = [];\r\n          if (msg.buttonList) {\r\n            constData = msg;\r\n          }\r\n          return (\r\n            <Card\r\n              key={index}\r\n              position={msg.position}\r\n              origin={origin}\r\n              payload={constData}\r\n              selected={props.sendMsg}\r\n            />\r\n          );\r\n        case \"image\":\r\n          console.log(\"--IMAGE--\",msg.type)\r\n          return <Image key={index} origin={origin} payload={msg.payload} />;\r\n        case \"buttons\":\r\n          console.log(\"--BUTTONS--\",msg.type)\r\n          return (\r\n            <Button \r\n              key={index}\r\n              position={msg.position}\r\n              origin={origin}\r\n              name={msg.name}\r\n              value={msg.value}\r\n              type={msg.flow}\r\n              action={msg.action}\r\n            />\r\n          );\r\n        default:          \r\n          console.log(\"--DEFAULT--\",msg.type)\r\n          return (\r\n            <TextMessage\r\n              key={index}\r\n              // ref={scrollTargetMessage}\r\n              position={msg.position}\r\n              origin=\"Bot\"\r\n              fromUser={msg.fromUser}\r\n              setIsAgent={props.setIsAgent}\r\n              agentChat={msg.agentChat}\r\n              now={msg.now}\r\n              payload={{ text: t(\"chatbody.error-msg\") }}\r\n            />\r\n          );\r\n      }\r\n    });\r\n\r\n  const msgElements = processMsgs(props.messages);\r\n\r\n  return (\r\n    <div\r\n      className={classes.ChatBody}\r\n      tabIndex=\"0\"\r\n      aria-live=\"polite\"\r\n      role=\"region\"\r\n      aria-label={t(\"chatbody.title\")}\r\n      ref={chatBodyDiv}\r\n    >\r\n      <div className={classes.MessagesContainer}>\r\n        {msgElements}\r\n        {props.showSpinner ? <Spinner /> : \"\"}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBody;\r\n","import React, { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport useSpeechToText from \"react-hook-speech-to-text\";\r\nimport classes from \"./Textarea.module.css\";\r\n//import micIcon from \"../../../../assets/images/mic.svg\";\r\n//import keyboardIcon from \"../../../../assets/images/keyboard-icon.svg\";\r\n\r\nconst Textarea = (props) => {\r\n  // eslint-disable-next-line no-unused-vars\r\n  const { t } = useTranslation(\"global\");\r\n  // eslint-disable-next-line no-unused-vars\r\n  const recordButtonClasses = [classes.RecordButton];\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [value, setValue] = useState(\"\");\r\n\r\n  // const changeHandler = (e) => {\r\n  //   props.setInputValue(e.target.value);\r\n  // };\r\n\r\n  const handleChange = (e) => {\r\n    setValue(JSON.stringify(interimResult));\r\n    props.setInputValue(e.target.value);\r\n    console.log(\"JSON.stringify(interimResult)\", JSON.stringify(interimResult));\r\n  };\r\n\r\n  const handleKeypress = (e) => {\r\n    //it triggers by pressing the enter key\r\n    if (e.charCode === 13) {\r\n      props.sendInputValue(e.target.value);\r\n    }\r\n  };\r\n\r\n  const clickHandlerKeyboard = () => {\r\n    stopSpeechToText();\r\n    props.setKeyBoardMode(true);\r\n  };\r\n\r\n  const {\r\n    error,\r\n    interimResult,\r\n    // eslint-disable-next-line no-unused-vars\r\n    isRecording,\r\n    // eslint-disable-next-line no-unused-vars\r\n    results,\r\n    // eslint-disable-next-line no-unused-vars\r\n    startSpeechToText,\r\n    stopSpeechToText,\r\n  } = useSpeechToText({\r\n    continuous: true,\r\n    useLegacyResults: false,\r\n  });\r\n\r\n  //if (error) return <p>Web Speech API is not available in this browser </p>;\r\n  if (error) {console.log(error)};\r\n\r\n  return (\r\n    <>\r\n      {/* TO-DO: temporal delete after test */}\r\n      {/* <ul>\r\n        {results.map((result) => (\r\n          <li key={result.timestamp}>{result.transcript}</li>\r\n        ))}\r\n        {interimResult && <li>{interimResult}</li>}\r\n      </ul> */}\r\n      <textarea\r\n        className={classes.Textarea}\r\n        name=\"commentTextArea\"\r\n        type=\"text\"\r\n        rows=\"1\"\r\n        onChange={handleChange}\r\n        onKeyPress={handleKeypress}\r\n        value={props.setVal}\r\n      />\r\n      {/* <button onClick={isRecording ? stopSpeechToText : startSpeechToText}  className={recordButtonClasses.join(\" \")}>      \r\n      <img data-recording={isRecording} src={micIcon} alt=\"\" />\r\n    </button> */}\r\n      <button\r\n        className={classes.ChatFooterKeyboardButton}\r\n        onClick={clickHandlerKeyboard}\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n          role=\"img\"\r\n          aria-label=\"Speak a message\"\r\n          className={classes.KeyboardButton}\r\n        >\r\n          <path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"></path>\r\n          <path d=\"M20 7v10H4V7h16m0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z\"></path>\r\n        </svg>\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Textarea;\r\n","import React, { useState, useRef, useEffect} from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport classes from \"./InputText.module.css\";\r\nimport data from './suggestions/suggestions.json';\r\n//import TagManager from 'react-gtm-module'\r\n\r\nconst InputText = (props, {options = []}) => {\r\n  const { t } = useTranslation(\"global\");\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [isDisabled, setIsDisabled] = useState(false);\r\n  const [value, setValue] = useState('');\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  options = data;\r\n  const inputRef = useRef(null);\r\n  const suggestions = options.filter((option) => (value.trim().length > 2) ? option.toLowerCase().includes(value.toLowerCase()) : '');\r\n\r\n  const changeHandler = (e) => {\r\n    setValue(e.target.value);\r\n    props.setInputValue(e.target.value);\r\n    props.getData(e.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setValue('');\r\n    setShowSuggestions(false);\r\n  }, [props.reset]);\r\n\r\n  const onKeyDown = (e) => {\r\n    if (e.key === 'Enter') {\r\n      setShowSuggestions(false);\r\n      setValue('');\r\n    }\r\n  }\r\n\r\n  const handleKeypress = (e) => {\r\n    //it triggers by pressing the enter key\r\n    if (e.charCode === 13) {\r\n      e.preventDefault();\r\n      // TagManager.dataLayer({\r\n      //   dataLayer: {\r\n      //     userId: '001',\r\n      //     userProject: 'chatBot',\r\n      //     page: 'footer'\r\n      //    }\r\n      // });\r\n      // console.log('datalayer');\r\n      // console.log(TagManager.dataLayer);\r\n      setShowSuggestions(false);\r\n      props.sendInputValue(e.target.value);\r\n    }\r\n    else {\r\n      setShowSuggestions(true);\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion) => {\r\n    setValue('');\r\n    props.sendSuggestion(suggestion);\r\n    setShowSuggestions(false);\r\n  }; \r\n\r\n  return (\r\n    <>\r\n    <textarea\r\n      value={value}\r\n      className={classes.InputText}\r\n      type=\"text\"\r\n      placeholder={t(\"chatfooter.input.placeholder\")}\r\n      title={t(\"chatfooter.input.title\")}\r\n      aria-label={t(\"chatfooter.input.title\")}\r\n      onChange={changeHandler}\r\n      onKeyPress={handleKeypress}\r\n      onKeyDown={onKeyDown}\r\n      disabled={props.setDisabled}\r\n      ref={inputRef}\r\n      rows={(value.length > 32) ? 2:1}\r\n    />\r\n    {showSuggestions && (\r\n      <ul className={classes.suggestions}>\r\n        {suggestions.map((suggestion) => (\r\n          <li              \r\n            onClick={() => handleSuggestionClick(suggestion)}              \r\n            key={suggestion}\r\n          >\r\n            {suggestion}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n            )}\r\n            </>\r\n  );\r\n};\r\n\r\nexport default InputText;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport classes from \"./ChatFooter.module.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\n//import AutoComplete from \"./Autocomplete/Autocomplete\";\r\nimport Textarea from \"./Textarea/Textarea\";\r\nimport InputText from \"./InputText/InputText\";\r\n//import keyboardIcon from \"../../../assets/images/keyboard-icon.svg\";\r\n//import { ReactComponent as SendImage } from \"../../../assets/images/send-icon.svg\";\r\n\r\nimport useSpeechToText from \"react-hook-speech-to-text\";\r\n\r\nconst ChatFooter = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n\r\n  const recordButtonClasses = [classes.RecordButton];\r\n  const sendButtonClasses = [classes.SendButton];\r\n  const inputFile = [classes.inputFile];\r\n  const ClassLabel = [classes.ClassLabel];\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [isDisabled, setIsDisabled] = useState(true);\r\n  //const chatFooterKeyboardButton = [classes.ChatFooterKeyboardButton];\r\n  const [isModeKeyboard, setIsModeKeyboard] = useState(true);\r\n  const [reset, doReset] = useState(false);\r\n\r\n  /* google-speech */\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [commentText, setCommentText] = useState(\"\");\r\n\r\n  // const handleSubmit = (evt) => {\r\n  //   evt.preventDefault();\r\n  //   console.log(commentText);\r\n  // };\r\n\r\n  const {\r\n    error,\r\n    interimResult,\r\n    isRecording,\r\n    // eslint-disable-next-line no-unused-vars\r\n    results,\r\n    startSpeechToText,\r\n    stopSpeechToText,\r\n  } = useSpeechToText({\r\n    continuous: true,\r\n    useLegacyResults: false,\r\n  });\r\n\r\n  //voice animation\r\n  let rows = [];\r\n  for (let i = 0; i < 20; i++) {\r\n    rows.push(<div key={i} className={classes.items}></div>);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isModeKeyboard) {\r\n      if (interimResult === undefined) {\r\n        if (commentText.length > 0) {\r\n          props.sendVoice(commentText);\r\n          clickHandlerKeyboard();\r\n        }\r\n      } else {\r\n        setCommentText(interimResult);\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [interimResult]);\r\n\r\n  const clickHandlerVoice = () => {\r\n    setIsModeKeyboard(false);\r\n    isRecording ? stopSpeechToText() : startSpeechToText();\r\n  };\r\n\r\n  const clickHandlerKeyboard = () => {\r\n    setIsModeKeyboard(true);\r\n    stopSpeechToText();\r\n  };\r\n\r\n  const clickHandlerSend = () => {\r\n    props.send();\r\n    doReset(!reset);\r\n    setIsDisabled(true);\r\n  };\r\n\r\n  const getData = (data) => {\r\n    setIsDisabled(data.length <= 0 ? true : false);\r\n  };\r\n\r\n  const handleFileRead = async (event) => {\r\n    \r\n    const file = event.target.files[0];\r\n    const name = file.name;\r\n\r\n    let formData = new FormData();\r\n    formData.append(name, file);\r\n\r\n    props.directSocketConnection\r\n      .sendAttachment(formData)\r\n      .then((response) => {\r\n        console.log(\"responseAttachment\", response);\r\n      })\r\n      .catch((err) => console.log(err));\r\n\r\n  };\r\n\r\n  //if (error) return <p>Web Speech API is not available in this browser </p>;\r\n  /* / google-speech */\r\n  if (error) {console.log(error)};\r\n\r\n  return (\r\n    <div\r\n      className={classes.ChatFooter}\r\n      role=\"region\"\r\n      aria-label={t(\"chatfooter.title\")}\r\n    >\r\n      {isModeKeyboard && (\r\n        <div className={classes.ChatFooterModeKeyboard}>\r\n          <InputText\r\n            setInputValue={props.setInputValue}\r\n            sendInputValue={props.send}\r\n            reset={reset}\r\n            getData={getData}\r\n            sendSuggestion={props.sendSuggestion}\r\n            setDisabled={props.setDisabled}\r\n          />\r\n          {/* <AutoComplete \r\n          setInputValue={props.setInputValue}\r\n        />  */}\r\n          <button\r\n            className={sendButtonClasses.join(\" \")}\r\n            onClick={clickHandlerSend}\r\n            disabled={props.setDisabled}\r\n            title=\"Enviar\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"24\"\r\n              height=\"24\"\r\n              viewBox=\"0 0 24 24\"\r\n              role=\"img\"\r\n              aria-label=\"Send a message\"\r\n              className={sendButtonClasses}\r\n            >\r\n              <path\r\n                d=\"M23.794125,0.206015625 C23.5952344,0.007078125 23.2968281,-0.05409375 23.0358281,0.05034375 L0.44203125,9.08775 C0.183515625,9.19115625 0.01040625,9.43734375 0.00046875,9.71564063 C-0.009421875,9.99389063 0.145828125,10.25175 0.396328125,10.37325 L9.30576563,14.6942344 L13.6267969,23.6036719 C13.7446406,23.8466719 13.9907344,24 14.2592813,24 C14.267625,24 14.2760156,24 14.2844063,23.9995313 C14.5626094,23.9896406 14.8088906,23.8165313 14.91225,23.5580156 L23.94975,0.964359375 C24.0541875,0.703171875 23.9930156,0.40490625 23.794125,0.206015625 Z M2.44190625,9.80240625 L20.3775,2.62823437 L9.68864063,13.317 L2.44190625,9.80240625 Z M14.1976406,21.5581406 L10.683,14.3113125 L21.3719063,3.62254687 L14.1976406,21.5581406 Z\"\r\n                id=\"Shape\"\r\n              ></path>\r\n            </svg>\r\n          </button>\r\n\r\n          <button\r\n            onClick={clickHandlerVoice}\r\n            className={recordButtonClasses.join(\" \")}\r\n            title=\"Hablar un mensaje\"\r\n            disabled={props.setDisabled}\r\n          >\r\n            <svg\r\n              data-recording={isRecording}\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"24\"\r\n              height=\"24\"\r\n              viewBox=\"0 0 24 24\"\r\n              role=\"img\"\r\n              aria-label=\"Speak a message\"\r\n              className={recordButtonClasses}\r\n            >\r\n              <path d=\"M7 23v-2h4v-2.062C7.06 18.444 4 15.073 4 11h2c0 3.309 2.691 6 6 6s6-2.691 6-6h2c0 4.072-3.059 7.444-7 7.938V21h4v2h-6zm5-22c2.206 0 4 1.794 4 4v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V5c0-2.206 1.794-4 4-4zm0 2c-1.103 0-2 .897-2 2v6c0 1.103.897 2 2 2s2-.897 2-2V5c0-1.103-.897-2-2-2z\"></path>\r\n            </svg>\r\n          </button>\r\n          {props.setIsAgent && <label className={ClassLabel}>\r\n            <input\r\n              id=\"originalFileName\"\r\n              type=\"file\"\r\n              required\r\n              label=\"Document\"\r\n              name=\"originalFileName\"\r\n              onChange={(e) => handleFileRead(e)}\r\n              size=\"small\"\r\n              className={inputFile}\r\n              disabled={props.setDisabled}\r\n            />\r\n            <svg\r\n              version=\"1.1\"\r\n              id=\"Layer_1\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              x=\"24\"\r\n              y=\"24\"\r\n              viewBox=\"0 0 512 512\"\r\n              className={recordButtonClasses}\r\n            >\r\n              <path\r\n                d=\"M467.076,68.86c-59.902-59.902-156.846-59.896-216.741,0L34.919,284.276c-46.558,46.557-46.558,122.312,0,168.87\r\n\t\t\tc46.57,46.571,122.326,46.544,168.87,0L419.205,237.73c33.36-33.36,33.36-87.64,0-121c-33.359-33.361-87.64-33.361-121,0\r\n\t\t\tL114.478,300.457c-6.975,6.975-6.975,18.285,0,25.259c6.975,6.975,18.285,6.975,25.259,0l183.727-183.727\r\n\t\t\tc19.432-19.432,51.05-19.432,70.481,0c19.431,19.432,19.431,51.05,0,70.481L178.53,427.887c-32.71,32.71-85.646,32.706-118.352,0\r\n\t\t\tc-15.806-15.806-24.511-36.821-24.511-59.175s8.706-43.369,24.511-59.176L275.594,94.119c45.94-45.94,120.287-45.934,166.222,0\r\n\t\t\tc45.827,45.828,45.827,120.395,0,166.222l-95.741,95.741c-6.975,6.975-6.975,18.284,0,25.259s18.285,6.975,25.259,0l95.741-95.741\r\n\t\t\tC526.978,225.7,526.971,128.754,467.076,68.86z\"\r\n              />\r\n            </svg>\r\n          </label>}\r\n        </div>\r\n      )}\r\n\r\n      {!isModeKeyboard && (\r\n        <div className={classes.ChatFooterModeVoice}>\r\n          <div className={classes.ChatFooterVisualizerWrapper}>\r\n            <div className={classes.wave}>{rows}</div>\r\n            {/* <button className={chatFooterKeyboardButton} onClick={clickHandlerKeyboard} >\r\n              <img src={keyboardIcon} alt=\"\" />\r\n            </button> */}\r\n          </div>\r\n          <div className={classes.ChatFooterRecognitionWrapper}>\r\n            <Textarea\r\n              setInputValue={props.setInputValue}\r\n              sendInputValue={props.send}\r\n              setKeyBoardMode={clickHandlerKeyboard}\r\n              setVal={interimResult}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default ChatFooter;\r\n","//Actions state messages\r\n\r\nexport const setMessages = (currentMsgs) => ({\r\n  type: \"MESSAGES_CURRENT\",\r\n  current: currentMsgs,\r\n});\r\n","export const getNow = (isHour12 = false) => {\r\n\r\n  let d = new Date();\r\n  let now = d.toLocaleString(\"es-ES\", {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    hour12: isHour12,\r\n  });\r\n  return now;\r\n};\r\n\r\nexport const processContext = (msg) => {\r\n  const data = JSON.parse(msg);\r\n  let textContext='';\r\n  data.forEach((item) => {\r\n    if (item.type==='text'){\r\n      textContext = textContext + '<hr><br>' + (item.fromUser ? '<strong>Ciudadano:</strong><br>':'<strong>Ayuntamiento (bot):</strong><br>') + item.payload.text;\r\n    }\r\n  })\r\n  return textContext;\r\n}\r\n\r\nexport const checkItemStorage = () => {\r\n  if (window.localStorage.getItem(\"oda-widget-status-date\")) {\r\n    const now = new Date().getTime();\r\n    console.log(\"now\", now);\r\n    let diff =\r\n      (now - window.localStorage.getItem(\"oda-widget-status-date\")) / 1000;\r\n    diff /= 60;\r\n    console.log(\"diff\", diff);\r\n\r\n    if (diff > 5) {\r\n      window.localStorage.removeItem(\"oda-widget-status-date\");\r\n    }\r\n  }\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport classes from \"./ChatContainer.module.css\";\r\nimport { TextMsg } from \"../chatElements/chatClasses\";\r\nimport ChatHeader from \"./ChatHeader/ChatHeader\";\r\nimport ChatBody from \"./ChatBody/ChatBody\";\r\nimport ChatFooter from \"./ChatFooter/ChatFooter\";\r\nimport { setMessages } from \"../../store/MessagesReducer/actionContainer\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\r\nimport { getNow, processContext } from \"../../helpers/functions\"\r\n\r\nconst ChatContainer = (props) => {\r\n  const { t } = useTranslation(\"global\");\r\n  //dispatch\r\n  const dispacth = useDispatch();\r\n  //messages state\r\n  const message = useSelector((state) => state.messagesContainer.messages);\r\n  const [showSpinner, setShowSpinner] = useState(false);\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [inputValueToSend, sendInputValue] = useState(\"\");\r\n  const [isModeAgent, setIsModeAgent] = useState(false);\r\n  const [isDisabledInput, setIsDisabledInput] = useState(false);\r\n  const [modeReset, setModeReset] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleTabClose = event => {\r\n      event.preventDefault();\r\n      sendAgentMessage(t(\"agent.userFinal\") + getNow(true), 'message', false);\r\n      return ' ';\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleTabClose);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleTabClose);\r\n    };\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const getGeolocation = () => {\r\n    if(navigator.geolocation)  {\r\n      navigator.geolocation.getCurrentPosition((position) => {\r\n        props.connection.longitud=position.coords.longitude;\r\n        props.connection.latitud=position.coords.latitude;\r\n        props.connection\r\n        .sendMessage('GET_LOCATION')\r\n        .then((response) => {\r\n          const newMsg = new TextMsg({ fromUser: true, text: t(\"geolocation.sent\") });\r\n          const msgs = [...[newMsg], ...response];\r\n          addMessages(msgs);\r\n        })\r\n        .catch((err) => console.log(err));\r\n      },\r\n      () => {\r\n        console.log('Unable to retrieve your location');\r\n        const newMsg = new TextMsg({ fromUser: false, text: t(\"geolocation.denied\") });\r\n        addMessages([newMsg]);\r\n      });\r\n    } else {\r\n        console.log('Geolocation is not supproted by your broswer');\r\n        const newMsg = new TextMsg({ fromUser: false, text: t(\"geolocation.notSupported\") });\r\n        addMessages([newMsg]);\r\n    }\r\n  };\r\n\r\n  const showMessageError = (err) => {\r\n    console.log(err);\r\n    const newMsg = new TextMsg({ fromUser: false, text: t(\"chatbody.error-msg\") });\r\n    addMessages([newMsg]);\r\n  }\r\n\r\n  useEffect(() => {\r\n    // If messages array is empty, It sends the initial message to the broker\r\n    if (!message.length) {\r\n      sessionStorage.removeItem('allMsgs');\r\n      setShowSpinner(false);\r\n      props.connection.url = window.location.href;\r\n      props.connection\r\n        .sendInitialMessage()\r\n        .then((response) => addMessages(response))\r\n        .catch((err) => {\r\n          showMessageError();\r\n        }\r\n          );\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const resetChat = (msg) => {\r\n\r\n    sessionStorage.removeItem(\"allMsgs\");\r\n    setShowSpinner(false);\r\n    props.connection.evaToken = \"\";\r\n    props.connection\r\n      .sendInitialMessage()\r\n      .then((response) => {\r\n        console.log('datos de respuesta:', response);\r\n        const newMsg = new TextMsg({ fromUser: true, text: msg, agentChat: isModeAgent, now: getNow() });\r\n        let allMsgs = response;\r\n        allMsgs.push(newMsg);\r\n        dispacth(setMessages(allMsgs));\r\n        setModeReset(false);\r\n      }\r\n      )\r\n      .catch((err) => {\r\n        showMessageError();\r\n      });\r\n\r\n  }\r\n\r\n  //Aade los mensajes del usuario como parmetro\r\n  const addUserMessage = () => {\r\n\r\n    if (inputValue.length <= 0) {\r\n      return;\r\n    }\r\n    //console.log('isModeAgent', isModeAgent);\r\n    //console.log('mode reset', modeReset);\r\n\r\n    if (modeReset){\r\n      resetChat(inputValue);\r\n      return;\r\n    }\r\n\r\n    const value = inputValue;\r\n    const newMsg = new TextMsg({ fromUser: true, text: value, agentChat: isModeAgent, now: getNow() });\r\n    setInputValue(\"\");\r\n    addMessages([newMsg]);\r\n    sendUserMessage(value, [newMsg]);\r\n  };\r\n\r\n  const pussButton = (e) => {\r\n    if (e === \"GET_LOCATION\") {\r\n      getGeolocation();\r\n      return;\r\n    }\r\n    const newMsg = new TextMsg({ fromUser: true, text: e });\r\n    addMessages([newMsg]);\r\n    sendUserMessage(e, [newMsg]);\r\n  };\r\n\r\n  const addUserMessageVoice = (msg) => {\r\n    if (msg.length <= 0) {\r\n      return;\r\n    }\r\n    const value = msg;\r\n    const newMsg = new TextMsg({ fromUser: true, text: value });\r\n    addMessages([newMsg]);\r\n    sendUserMessage(value, [newMsg]);\r\n  };\r\n\r\n  const sendUserMessage = (text, msg) => {\r\n    // Sending user message to the broker\r\n    setShowSpinner(true);\r\n    console.log(\"parametro del user:\" + text);\r\n    if (text === 'CERRAR' && isModeAgent) {\r\n      setIsModeAgent(false);\r\n      sendAgentMessage(inputValue, 'endOfConversation', false);\r\n      return;\r\n    }\r\n\r\n    if (!isModeAgent) {\r\n      props.connection\r\n        .sendMessage(text)\r\n        .then((response) => {\r\n          if (response[0].type === 'text' && response[0].payload.text === '<p>AGENTE</p>' ){\r\n            sessionStorage.setItem('agent',0);\r\n            abrirConexionAgente();\r\n          }\r\n          else {\r\n            console.log('datos de la respuesta',response);\r\n            const msgs = [...msg, ...response];\r\n            addMessages(msgs);   \r\n          }     \r\n        })\r\n        .catch((err) => {\r\n          showMessageError();\r\n        });\r\n    }\r\n    else {\r\n      console.log('enviar mensaje agente');\r\n      setInputValue(\"\");\r\n      sendAgentMessage(text, 'message',true);\r\n    }\r\n  };\r\n\r\n  const cleanAllButtons = (msgs, length) => {\r\n    const nItems = msgs.length;\r\n    console.log('mensajes', msgs);\r\n    sessionStorage.setItem('allMsgs', JSON.stringify(msgs));\r\n    msgs.forEach((item, index) => {\r\n      if ((index < nItems - length) && item.type === 'quick_reply'){\r\n         item.payload.buttons.forEach((element) => {\r\n            element.value = '';\r\n            element.type='disabled';\r\n         });\r\n      }\r\n      if ((index < nItems - length) && item.type === 'CARRUSEL'){\r\n        item.payload.items.forEach((element) => {\r\n           element.buttonList.forEach((button) => {\r\n            button.value='';\r\n            button.type='disabled';\r\n           });\r\n\r\n        });\r\n     }\r\n    });\r\n  }\r\n\r\n  // Adding new messages to the state\r\n  const addMessages = (newMsgsArray) => {\r\n    //console.log('n mensajes', newMsgsArray.length );\r\n    const currentMsgs = [...message, ...newMsgsArray];\r\n    cleanAllButtons(currentMsgs, (newMsgsArray.length - 1));\r\n    //block input\r\n    if (currentMsgs.length >=2){\r\n      setIsDisabledInput(currentMsgs[currentMsgs.length - 2].blockInput);\r\n    }\r\n    dispacth(setMessages(currentMsgs));\r\n    setShowSpinner(false);\r\n  };\r\n\r\n  const addSuggestion = (msg) => {\r\n    const newMsg = new TextMsg({ fromUser: true, text: msg });\r\n    setInputValue(\"\");\r\n    addMessages([newMsg]);\r\n    sendUserMessage(msg, [newMsg] );\r\n  }\r\n\r\n  const agentTasks = (response) => {\r\n\r\n    console.log(\"response connect\", response);\r\n    let client = new W3CWebSocket(\r\n      props.directSocketConnection.urlSocket\r\n    );\r\n    client.onopen = () => {\r\n      console.log(\"WebSocket Client Connected\");\r\n      setIsModeAgent(true);\r\n      sessionStorage.getItem('allMsgs');\r\n      const contextData = processContext(sessionStorage.getItem('allMsgs'));\r\n      sendAgentMessage(contextData,'message', false, true);\r\n    };\r\n    client.onclose = () => {\r\n      console.log('closing connection');\r\n      console.log(\"Socket hard closed\", client.readyState);\r\n    }\r\n    client.onmessage = (messageDirect) => {\r\n      console.log(\"respuesta del socket\", messageDirect);\r\n      const messages = JSON.parse(sessionStorage.getItem('allMsgs'));\r\n      if (messageDirect.data) {\r\n        const dataFromServer = JSON.parse(messageDirect.data);\r\n        console.log(\"respuesta del socket json\", dataFromServer);\r\n\r\n        if (dataFromServer.activities[0].text === t('agent.finMessage')) {\r\n          console.log('mensaje de final de la conversacion');\r\n          setIsModeAgent(false);\r\n          setModeReset(true);\r\n          const newMsg = new TextMsg({ fromUser: false, text: t('agent.final'), agentChat: true, now: getNow() });\r\n          const allMensajes = [...messages,...[newMsg]];\r\n          sessionStorage.setItem('allMsgs', JSON.stringify(allMensajes));\r\n          dispacth(setMessages(allMensajes));\r\n          client.close();\r\n        } else if (dataFromServer.activities[0].attachments && dataFromServer.activities[0].from.id !== \"user\") {\r\n          sessionStorage.setItem('agent', 1);\r\n          const newMsg = new TextMsg({ fromUser: false, text: 'Fichero recibido: [<a href=\"' + dataFromServer.activities[0].attachments[0].contentUrl +'\"target=\"_blank\">' + dataFromServer.activities[0].attachments[0].name + '</a>]', agentChat: true, now: getNow() });\r\n          const allMensajes = [...messages,...[newMsg]];\r\n          sessionStorage.setItem('allMsgs', JSON.stringify(allMensajes));\r\n          dispacth(setMessages(allMensajes));\r\n\r\n        } else if (dataFromServer.activities[0].from.id === \"user\") {\r\n          console.log('es el usuario', dataFromServer.activities[0]);\r\n          if (sessionStorage.getItem('agent') === '0' && (dataFromServer.activities[0].text && dataFromServer.activities[0].text.length < 40)){\r\n            const newMsg = new TextMsg({ fromUser: false, text: t(\"agent.waitUser\"), agentChat: true, now: getNow() });\r\n            const allMensajes = [...messages,...[newMsg]];\r\n            sessionStorage.setItem('allMsgs', JSON.stringify(allMensajes));\r\n            dispacth(setMessages(allMensajes));\r\n          }\r\n          else if (dataFromServer.activities[0].attachments) {\r\n            const newMsg = new TextMsg({ fromUser: true, text: 'Fichero enviado', agentChat: true, now: getNow() });\r\n            const allMensajes = [...messages,...[newMsg]];\r\n            sessionStorage.setItem('allMsgs', JSON.stringify(allMensajes));\r\n            dispacth(setMessages(allMensajes));\r\n          }\r\n        }\r\n        else  {\r\n          //Mensaje del agente\r\n          sessionStorage.setItem('agent', 1);\r\n          const newMsg = new TextMsg({ fromUser: false, text: dataFromServer.activities[0].text, agentChat: true, now: getNow()});\r\n          const allMensajes = [...messages,...[newMsg]];\r\n          sessionStorage.setItem('allMsgs', JSON.stringify(allMensajes));\r\n          dispacth(setMessages(allMensajes));\r\n        }\r\n        setShowSpinner(false);\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n  const abrirConexionAgente = () => {\r\n    props.directSocketConnection\r\n    .connect()\r\n    .then((response) => {\r\n      agentTasks(response);\r\n    })\r\n    .catch((err) => console.log(err));\r\n  } \r\n\r\n  const sendAgentMessage = (msg, type, isUser, isFirst = false) =>  {\r\n    const dataSend = {\r\n      locale: \"es-ES\",\r\n      type: type,\r\n      from: {\r\n        id: \"user\",\r\n      },\r\n      text: msg,\r\n    };\r\n    props.directSocketConnection\r\n      .sendMessageAgent(dataSend)\r\n      .then((response) => {\r\n        console.log(\"responseSendMessage\", response);\r\n        if (!isUser) {\r\n          const messages = JSON.parse(sessionStorage.getItem('allMsgs'));\r\n          for (let i = 2; i <= 3; i++) {\r\n            if (messages[messages.length - i].payload.buttons){\r\n              messages[messages.length - i].payload.buttons.forEach((element) => {\r\n                element.type = 'disabled';\r\n                element.value = '';\r\n              });\r\n            }\r\n          }\r\n          const msgToAdd = isFirst ? t('agent.welcome') : msg;\r\n          const newMsg = new TextMsg({ fromUser: isUser, text: msgToAdd, agentChat: true, now: getNow() });\r\n          const newMessages = [...messages,...[newMsg]];\r\n          sessionStorage.setItem('allMsgs', JSON.stringify(newMessages));\r\n          dispacth(setMessages(newMessages));\r\n          setShowSpinner(false);\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  //Se crea una constante con toda la composicion de los componentes del chat\r\n  const chatContainer = (\r\n    <div\r\n      className={classes.ChatContainer}\r\n      role=\"region\"\r\n      aria-label={t(\"chatcontainer.title\")}\r\n    >\r\n      {/*hereda los props de app.js, abre el chat si no est abierto\r\n          viene del mtodo de app.js toggleChatHandler */}\r\n\r\n      <ChatHeader close={props.closeChat} />\r\n      <ChatBody\r\n        messages={message}\r\n        showSpinner={showSpinner}\r\n        setIsAgent={isModeAgent}\r\n        sendMsg={addUserMessage}\r\n        pushButton={pussButton}\r\n      />\r\n      <ChatFooter\r\n        send={addUserMessage}\r\n        sendVoice={addUserMessageVoice}\r\n        setInputValue={setInputValue}\r\n        sendInputValue={sendInputValue}\r\n        sendSuggestion={addSuggestion}\r\n        setIsAgent={isModeAgent}\r\n        setDisabled={isDisabledInput}\r\n        directSocketConnection={props.directSocketConnection}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    //react.fragment se usa para coger mliples nodos, en este caso coge chatContainer\r\n    <React.Fragment>\r\n      {/*props.show es un prop procedente del state de this.state.chatIsOpen en App.js \r\n        que indica si el chat est abierto o no*/}\r\n      {props.show ? chatContainer : \"\"}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default withTranslation(\"global\")(ChatContainer);\r\n","//Actions chatContainer\r\n\r\nexport const setChatIsOpens = (chatIsOpen) => ({\r\n  type: \"CHAT_ISOPEN\",\r\n  chat: chatIsOpen,\r\n});\r\n","import axios from \"axios\";\r\n\r\nclass IPDataConnection {\r\n\r\n  constructor() {\r\n    this.ipDataToken = process.env.REACT_APP_IPDATA_TOKEN;\r\n  }\r\n\r\n  getIpdata = () => {\r\n\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get(\r\n          `https://api.ipdata.co?api-key=${this.ipDataToken}`\r\n        )\r\n        .then(async (response) => {\r\n          //console.log('valores de ipData',response.data.threat);\r\n          const thread = response.data.threat;\r\n          let isSecure = true;\r\n           if (thread.is_tor ||\r\n            thread.is_anonymous ||\r\n            thread.is_known_attacker ||\r\n            thread.is_known_abuser ||\r\n            thread.is_threat ||\r\n            thread.is_bogon) {\r\n                isSecure = false;\r\n            }\r\n            // else if (thread.scores && ((thread.scores.threat_score>=process.env.REACT_APP_IPDATA_THREAT_SCORE) || \r\n            //                            (thread.scores.trust_score<=process.env.REACT_APP_IPDATA_TRUST_SCORE)) ){\r\n            //    isSecure = false;\r\n            // }\r\n            if (!isSecure ){\r\n              const responseUpdate = this.addInfoIPData(response.data);\r\n              console.log(responseUpdate);\r\n            }\r\n          resolve(isSecure);\r\n        })\r\n        .catch((err) => {          \r\n          console.log('err',err);\r\n          reject();\r\n        });\r\n    });\r\n  };\r\n\r\n  addInfoIPData = async (data) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      const dataToSend = {ipdata : data};\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_IPDATA_URL,\r\n          dataToSend\r\n        )\r\n        .then((response) => {\r\n          console.log('response update', response);\r\n          resolve(response);\r\n        })\r\n        .catch((err) => {          \r\n            console.log('err',err);\r\n            return resolve(true);\r\n            //reject();\r\n        });\r\n    });\r\n  };\r\n\r\n\r\n}\r\n\r\nexport default IPDataConnection;\r\n","import axios from \"axios\";\r\n\r\nclass DirectSocketConnection {\r\n  constructor() {\r\n    this.conversationId = \"\";\r\n    this.urlSocket = \"\";\r\n    this.token = process.env.REACT_APP_AGENT_TOKEN\r\n  }\r\n\r\n  sendInitialMessage = () => {\r\n    return new Promise((resolve, reject) => {\r\n      this.connect()\r\n        .then(() => resolve())\r\n        .catch((err) => reject(err));\r\n    });\r\n  };\r\n\r\n  connect = async () => {\r\n    return new Promise((resolve, reject) => {\r\n      const config = {\r\n        headers: { Authorization: `Bearer ${this.token}` },\r\n      };\r\n\r\n      const bodyParameters = {\r\n        key: \"value\",\r\n      };\r\n\r\n      axios\r\n        .post(\r\n          `https://directline.botframework.com/v3/directline/conversations`,\r\n          bodyParameters,\r\n          config\r\n        )\r\n        .then((response) => {\r\n          console.log(\"respuesta de la llamada a conexin\", response);\r\n          this.urlSocket = response.data.streamUrl;\r\n          this.conversationId = response.data.conversationId;\r\n          return resolve();\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error:\", err);\r\n          return resolve();\r\n        });\r\n    });\r\n  };\r\n\r\n  sendMessageAgent = async (msg) => {\r\n    return new Promise((resolve, reject) => {\r\n      const config = {\r\n        headers: { Authorization: `Bearer ${this.token}` },\r\n      };\r\n\r\n      axios\r\n        .post(\r\n          `https://directline.botframework.com/v3/directline/conversations/${this.conversationId}/activities`,\r\n          msg,\r\n          config\r\n        )\r\n        .then((response) => {\r\n          console.log(\"respuesta send messsage\", response);\r\n          return resolve(this.response);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error:\", err);\r\n          return resolve();\r\n        });\r\n    });\r\n  };\r\n\r\n  sendAttachment = async (msg) => {\r\n    return new Promise((resolve, reject) => {\r\n      const config = {\r\n        headers: { Authorization: `Bearer ${this.token}`,\r\n                   \"Content-type\": \"multipart/form-data\" },\r\n      };\r\n\r\n      axios\r\n        .post(\r\n          `https://directline.botframework.com/v3/directline/conversations/${this.conversationId}/upload?userId=user`,\r\n          msg,\r\n          config\r\n        )\r\n        .then((response) => {\r\n          console.log(\"respuesta send messsage\", response);\r\n          return resolve(this.response);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error:\", err);\r\n          return resolve();\r\n        });\r\n    });\r\n  };\r\n\r\n}\r\n\r\nexport default DirectSocketConnection;\r\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport WidgetButton from \"./components/WidgetButton/WidgetButton\";\r\nimport WidgetButtonSmall from \"./components/WidgetButtonSmall/WidgetButtonSmall\";\r\nimport ChatContainer from \"./components/ChatContainer/ChatContainer\";\r\nimport { setChatIsOpens } from \"../src/store/ChatReducer/actionChat\";\r\nimport React, { useState } from \"react\";\r\nimport IPDataConnection from \"./services/eva/IPDataConnection\";\r\nimport DirectSocketConnection from \"../src/services/eva/DirectSocketConnection\";\r\nimport { checkItemStorage } from \"./helpers/functions\";\r\n\r\nconst App = (props) => {\r\n  //dispatch\r\n  const dispacth = useDispatch();\r\n  //chatIsOpen state\r\n  const chatIsOpen = useSelector((state) => state.chatApp.chatIsOpen);\r\n  const [IsBigButtonOpened, setIsBigButtonOpened] = useState(!window.localStorage.getItem('oda-widget-status-date'));\r\n  const ipDAtaConnection = new IPDataConnection();\r\n  const directSocketConnection = new DirectSocketConnection();\r\n  const [hasIpData, setHasIpData] = useState(false);\r\n\r\n  checkItemStorage();\r\n\r\n  const toggleChatHandler = (option) => {\r\n    if (option === \"chat\") {\r\n      if (!chatIsOpen & !hasIpData){\r\n        // check ipddata\r\n        ipDAtaConnection\r\n        .getIpdata()\r\n        .then((response) => {\r\n          //console.log('valor de la respuesta', response);\r\n          if (response){\r\n            setHasIpData(true);\r\n            dispacth(setChatIsOpens(!chatIsOpen));\r\n          }\r\n        })\r\n      .catch((err) => console.log(err));\r\n      }\r\n      else {\r\n        dispacth(setChatIsOpens(!chatIsOpen));\r\n      }\r\n    } else if (option === \"bigButton\") {\r\n      setIsBigButtonOpened(true);\r\n    } else {\r\n      setIsBigButtonOpened(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <WidgetButtonSmall\r\n        show={!chatIsOpen && !IsBigButtonOpened}\r\n        click={toggleChatHandler}\r\n      />\r\n      <WidgetButton\r\n        show={!chatIsOpen && IsBigButtonOpened}\r\n        click={toggleChatHandler}\r\n      />\r\n      {chatIsOpen && (\r\n        <ChatContainer\r\n          show={chatIsOpen}\r\n          closeChat={toggleChatHandler}\r\n          connection={props.connection}\r\n          directSocketConnection={directSocketConnection}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","//import demoInput from \"../../demoInput\";\r\n//Reducer state messages\r\n\r\n//initial value of the state\r\nconst initialMessage = {\r\n  messages:[],\r\n  // messages: demoInput,\r\n};\r\n\r\nconst reducerContainer = (state = initialMessage, action) => {\r\n  switch (action.type) {\r\n    case \"MESSAGES_CURRENT\":\r\n      return { ...state, messages: action.current };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default reducerContainer;\r\n","//Reducer state chatIsOpen\r\n\r\n//initial value of the state\r\nconst initialMessageChat = {\r\n  chatIsOpen: false,\r\n};\r\n\r\nconst reducerChat = (state = initialMessageChat, action) => {\r\n  switch (action.type) {\r\n    case \"CHAT_ISOPEN\":\r\n      return { ...state, chatIsOpen: action.chat };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default reducerChat;\r\n","//import Carousel from \"../../components/chatElements/Carousel/Carousel\";\r\nimport {\r\n  TextMsg,\r\n  QuickReply,\r\n  Button,\r\n  Carousel\r\n} from \"../../components/chatElements/chatClasses\";\r\n//import data from \"../../mocks/data.json\";\r\n\r\nconst processResponse = (rowData) => {\r\n  //console.log('data', rowData);\r\n  const context = rowData.data.context;\r\n  const sessionCode = rowData.data.sessionCode;\r\n  let dataAnswers = rowData.data.answers;\r\n\r\n  const messages = [];\r\n\r\n  //const dataAnswers = data;\r\n  //console.log('dataAnswer', dataAnswers);\r\n\r\n  dataAnswers.forEach((answer) => {\r\n\r\n    if (answer.type === 'CUSTOM_JSON') {\r\n      return;\r\n    }\r\n    else if (answer.content.type !== 'CARRUSEL') {\r\n      const text = answer.content;\r\n      let blockInput = false;\r\n      for (let name in answer.technicalText) {\r\n         if (name === 'blockInput'){\r\n          blockInput = answer.technicalText[name]\r\n         }\r\n      }\r\n      const newMsg = new TextMsg({ fromUser: false, text: text, agentChat: false, now: '', blockInput : blockInput});\r\n      messages.push(newMsg);\r\n    }\r\n    else if (answer.content.type === 'text' &&  answer.content==='<p>AGENTE</p>' ) {\r\n      const newMsg = new TextMsg({ fromUser: false, text: 'PRUEBA', agentChat: false, now: '', blockInput : false});\r\n      messages.push(newMsg);\r\n    }\r\n    //console.log(\"answers\", answer)\r\n\r\n    if (answer.buttons && answer.buttons.length) {\r\n      //console.log(\"buttons true\")\r\n      const buttonsArray = [];\r\n      answer.buttons.forEach((option) => {\r\n        const newBtn = new Button({\r\n          title: option.name,\r\n          value: option.value,\r\n          action: option.action,\r\n          type: option.type,\r\n        });\r\n        buttonsArray.push(newBtn);        \r\n      });\r\n      const newButtonsReply = new QuickReply({ buttons: buttonsArray });\r\n      messages.push(newButtonsReply);  \r\n    }\r\n    if (answer.quickReply && answer.quickReply.length) {\r\n      const buttonsArray = [];\r\n      answer.quickReply.forEach((option) => {\r\n        const newBtn = new Button({\r\n          title: option.name,\r\n          value: option.value,\r\n          action: option.action,\r\n          type: \"quick_reply\",\r\n        });\r\n        buttonsArray.push(newBtn);\r\n      });\r\n      const newQuickReply = new QuickReply({ buttons: buttonsArray });\r\n      messages.push(newQuickReply);\r\n    } \r\n    if (answer.content.type === 'CARRUSEL') {\r\n\r\n      const items = [];\r\n      answer.content.content.forEach((item) => {\r\n        items.push(item);\r\n        //console.log('item:',item);\r\n      });\r\n\r\n      const carrusel = new Carousel({\r\n        items\r\n      })\r\n      messages.push(carrusel);\r\n    }  \r\n  });\r\n  return { messages, context, sessionCode };\r\n};\r\n\r\nexport default processResponse;\r\n","import axios from \"axios\";\r\n\r\nimport processResponse from \"./processResponse\";\r\nimport config from \"../../config\";\r\nexport class EvaMsg {\r\n  constructor({ text, code, context }) {\r\n    this.text = text;\r\n    this.code = code;\r\n    this.context = context;\r\n  }\r\n}\r\nclass Eva4Connection {\r\n\r\n  constructor() {\r\n    this.sessionCode = \"\";\r\n\r\n    this.eva4Config = config.eva4Config;\r\n    this.userRef = Math.floor(Math.random() * 1000000000000000000 + 1);\r\n    this.evaToken = \"\";\r\n    this.longitud = \"\";\r\n    this.latitud = \"\";\r\n    this.url = \"\";\r\n  }\r\n\r\n  sendInitialMessage = () => {\r\n    \r\n    return new Promise((resolve, reject) => {     \r\n      this.sendMessage(\"33wWrVrVwWRWVrvAw\", null, {\r\n         lang: \"es\",\r\n         session: \"\",\r\n      })\r\n        .then((messages, session) => resolve(messages, session))\r\n        .catch((err) => reject(err));\r\n    });    \r\n  };\r\n\r\n  getEvaToken = () => {\r\n    return new Promise((resolve, reject) => {\r\n      const msg = {\r\n        grant_type: this.eva4Config.token.grant_type,\r\n        client_id: this.eva4Config.token.client_id,\r\n        client_secret: this.eva4Config.token.client_secret,\r\n      };\r\n      const msgEnconded = new URLSearchParams(msg).toString();\r\n      axios\r\n        .post(\r\n          `https://${this.eva4Config.token.keycloak_ur}/auth/realms/${this.eva4Config.token.org_name}/protocol/openid-connect/token`,\r\n          msgEnconded\r\n        )\r\n        .then((response) => {\r\n          const token = response.data.access_token;\r\n          return resolve(token);\r\n        })\r\n        .catch((err) => reject(err));\r\n    });\r\n  };\r\n\r\n  sendMessage = async (text, code, options) => {\r\n\r\n    if (!this.evaToken) {\r\n      this.evaToken = await this.getEvaToken();\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const context = {\r\n        // getting some context data from cookies\r\n        lng: \"es\",\r\n        latitud: this.latitud,\r\n        longitud: this.longitud,\r\n        url: this.url\r\n        // form: options.form,\r\n        // user_data: {token: token}\r\n      };\r\n      const msg = new EvaMsg({\r\n        text: text || \"\",\r\n        code: code || \"\",\r\n        context: context,\r\n      });\r\n      const sessionCode = options ? options.session : this.sessionCode;\r\n      const headers = this.eva4Config.conversation.headers;\r\n      headers[\"USER-REF\"] = this.userRef;\r\n      headers[\"Authorization\"] = \"Bearer \" + this.evaToken;\r\n\r\n      const bot = this.eva4Config.conversation.url.botUUID;\r\n\r\n      axios\r\n        .post(\r\n          `https://api-${this.eva4Config.conversation.url.instance}.eva.bot/eva-broker/org/${this.eva4Config.conversation.url.orgUUID}/env/${this.eva4Config.conversation.url.envUUID}/bot/${bot}/conversations/${sessionCode}`,\r\n          msg,\r\n          { headers: headers }\r\n        )\r\n        .then((response) => {\r\n          const { messages, context, sessionCode } = processResponse(response);\r\n          this.context = context;\r\n          this.sessionCode = sessionCode;\r\n          return resolve(messages, sessionCode);\r\n        })\r\n        .catch((err) => {          \r\n          if (err.response && err.response.status === 401) {\r\n            this.evaToken = \"\";\r\n            return resolve(this.sendMessage(text, code, options));\r\n          }\r\n          return resolve();\r\n        });\r\n    });\r\n  };\r\n}\r\n\r\nexport default Eva4Connection;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\n//internationalization\r\nimport { I18nextProvider } from \"react-i18next\";\r\nimport i18next from \"i18next\";\r\nimport global_es from \"./translations/es/global.json\";\r\n\r\n//Redux\r\nimport { Provider } from \"react-redux\";\r\nimport reducerContainer from \"./store/MessagesReducer/reducerContainer\";\r\nimport { createStore, combineReducers } from \"redux\";\r\nimport reducerChat from \"./store/ChatReducer/reducerChat\";\r\n\r\nimport EvaConexion from \"./services/eva/EvaConectionV4\";\r\n\r\n//store Redux\r\nconst rootReducer = combineReducers({\r\n  messagesContainer: reducerContainer,\r\n  chatApp: reducerChat,\r\n});\r\nconst store = createStore(rootReducer);\r\nconsole.log(store.getState());\r\n\r\ni18next.init({\r\n  interpolation: { escapeValue: false },\r\n  lng: \"es\",\r\n  resources: {\r\n    es: {\r\n      global: global_es,\r\n    },\r\n  },\r\n});\r\n\r\nconst connection = new EvaConexion();\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <I18nextProvider i18n={i18next}>\r\n      <Provider store={store}>\r\n        <App connection={connection} />\r\n      </Provider>\r\n    </I18nextProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"Card_Card__4EWui\",\"Image\":\"Card_Image__3oPaK\",\"Title\":\"Card_Title__36_9f\",\"Buttons\":\"Card_Buttons__1-Gbs\",\"Description\":\"Card_Description__ClSz1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ChatHeader\":\"ChatHeader_ChatHeader__22a3c\",\"HeaderAndLogo\":\"ChatHeader_HeaderAndLogo__1759L\",\"MoveAndCloseIcon\":\"ChatHeader_MoveAndCloseIcon__3OPlH\",\"Logo\":\"ChatHeader_Logo__1L42Y\",\"Title\":\"ChatHeader_Title__2iKCh\",\"HideText\":\"ChatHeader_HideText__1R0Zn\",\"CloseButton\":\"ChatHeader_CloseButton__39Ozz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"carouselContainer\":\"Carousel_carouselContainer__28iBq\",\"carouselWrapper\":\"Carousel_carouselWrapper__3LVOQ\",\"carouselContentWrapper\":\"Carousel_carouselContentWrapper__2i6_Z\",\"carouselContent\":\"Carousel_carouselContent__1KfEg\",\"leftArrow\":\"Carousel_leftArrow__jEGGe\",\"rightArrow\":\"Carousel_rightArrow__3YqD1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Spinner\":\"Spinner_Spinner__a2adv\",\"DotContainer\":\"Spinner_DotContainer__wFeJM\",\"Dot\":\"Spinner_Dot__28Cxy\",\"fade\":\"Spinner_fade__ogT7K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextMessage\":\"TextMessage_TextMessage__3ucNy\",\"Bot-message\":\"TextMessage_Bot-message__30Fi9\",\"User-message\":\"TextMessage_User-message__2Ty4O\",\"ImgAvatar\":\"TextMessage_ImgAvatar__1eJ3E\",\"WithAvatar\":\"TextMessage_WithAvatar__3Wvq6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Form\":\"Form_Form__28qbT\",\"Inputs\":\"Form_Inputs__WDlbF\",\"Buttons\":\"Form_Buttons__3BtIA\",\"button\":\"Form_button__DKdzD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__16PqH\",\"ButtonClicked\":\"Button_ButtonClicked__EyXS3\",\"Button_cancel\":\"Button_Button_cancel__3hof5\",\"Secondary\":\"Button_Secondary__E1Ji0\",\"Disabled\":\"Button_Disabled__2xSzO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Checkbox\":\"Checkbox_Checkbox__yjzZO\",\"Error\":\"Checkbox_Error__1Lihh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextInput\":\"TextInput_TextInput__22Plq\",\"Modified\":\"TextInput_Modified__k05Je\",\"Error\":\"TextInput_Error__2zG0t\",\"Invalid\":\"TextInput_Invalid__3rCEy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ChatFooterKeyboardButton\":\"Textarea_ChatFooterKeyboardButton__19eGy\",\"KeyboardButton\":\"Textarea_KeyboardButton__1EVZe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"WidgetButtonContainer\":\"WidgetButton_WidgetButtonContainer__1lDkA\",\"WidgetButton\":\"WidgetButton_WidgetButton__3zMIh\",\"CloseButton\":\"WidgetButton_CloseButton__13Gza\",\"Widget\":\"WidgetButton_Widget__1CCia\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BubbleContainer\":\"Bubble_BubbleContainer__1l277\",\"slide-top\":\"Bubble_slide-top__1dLyv\",\"Bubble\":\"Bubble_Bubble__zvmvL\",\"CloseButton\":\"Bubble_CloseButton__s_Url\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QuickReply\":\"QuickReply_QuickReply__1oB-W\",\"VerticalButtons\":\"QuickReply_VerticalButtons__1bulU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BubbleContainer\":\"Bubble_BubbleContainer__1zxnH\",\"slide-top\":\"Bubble_slide-top__bDrH9\",\"Bubble\":\"Bubble_Bubble__2Wgjs\",\"CloseButton\":\"Bubble_CloseButton__1xbzR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"WidgetButtonSmall\":\"WidgetButtonSmall_WidgetButtonSmall__1KMUn\",\"WidgetSmall\":\"WidgetButtonSmall_WidgetSmall__3JGBF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ChatBody\":\"ChatBody_ChatBody__3bo5_\",\"MessagesContainer\":\"ChatBody_MessagesContainer__2pYS9\",\"fade\":\"ChatBody_fade__BAPPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Download\":\"Download_Download__7trGe\",\"DownloadClicked\":\"Download_DownloadClicked__nD4hJ\",\"Download_cancel\":\"Download_Download_cancel__2KMSJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Select\":\"Select_Select__VpZ42\",\"Modified\":\"Select_Modified__2IOri\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Image\":\"Image_Image__2Oi3O\",\"FullSizeImage\":\"Image_FullSizeImage__2pXqI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"InputText\":\"InputText_InputText__3CSte\",\"suggestions\":\"InputText_suggestions__2BGid\",\"popup-suggestion\":\"InputText_popup-suggestion__jo403\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ChatContainer\":\"ChatContainer_ChatContainer__20l4Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__1P6bG\"};","module.exports = {\r\n  eva4Config: {\r\n    token:{\r\n      keycloak_ur: 'keycloak-europe-admin.eva.bot',\r\n      org_name: 'AYTO-MADRID',\r\n      grant_type: 'client_credentials',\r\n      client_id: 'ayto-madrid',\r\n      client_secret: 'BNJeqK5dX2HdkcNFSWIxI0WsQfluWkog'\r\n    },\r\n    conversation:{\r\n      url:{\r\n        instance: 'europe-instance1',\r\n        orgUUID: 'be19031a-8c28-4407-a0b0-a114f03e17b2',\r\n        // DEV TESTbotUUID: '53e10084-49aa-468d-8a46-021b6aef8105' // BOT TEST\r\n        // DEV \r\n        envUUID: process.env.REACT_APP_ENV_UUID || 'b2e31e56-0425-4692-9db2-5ee671b9ad8a',\r\n        botUUID: process.env.REACT_APP_BOT_UUID || '4a7fe88c-65ae-4a59-9293-2b81edb52afc' \r\n        // PRE        \r\n        //envUUID: process.env.ENV_UUID || '8c70d0d7-a78d-4b0a-a37f-9575c161da55',\r\n        //botUUID: process.env.BOT_UUID || '0e2a7fdc-6144-4341-ba6b-c3291f29ab62'  \r\n\r\n      },\r\n      headers:{\r\n        \"Content-Type\": 'application/json',\r\n        //DEV\r\n        \"API-KEY\": process.env.REACT_APP_API_KEY || 'd5e21644-1293-11ed-8973-4201ac1e010a' ,\r\n        //PRE\r\n        //\"API-KEY\": process.env.API_KEY || '631c8200-43ff-11ed-941a-4201ac1e0114',\r\n        //\"CHANNEL\": 'WEB', // BOT TEST\r\n        \"CHANNEL\": 'Webchat',\r\n        \"LOCALE\": 'es-ES',\r\n        \"OS\": 'Windows'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n"],"sourceRoot":""}